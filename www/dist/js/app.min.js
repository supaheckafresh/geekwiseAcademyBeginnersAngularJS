"use strict";!function(o){var t={title:"Angular Exercises / Reservation Application",version:.9,author:"Josh R. Dunlavy",fetchRestUrl:function(o){if(o){var t="https://confdeconflictor.firebaseio.com/",e=".json";return t+o+e}}};o.module("application",["ngRoute"]).constant("settings",t).config(["$locationProvider","$routeProvider",function(o,t){o.html5Mode(!0),t.when("/exercise1",{templateUrl:"/www/app/partials/exercise1.partial.htm",controller:"exercise1Controller",controllerAs:"vm"}).when("/exercise2",{templateUrl:"/www/app/partials/exercise2.partial.htm",controller:"exercise2Controller",controllerAs:"vm"}).when("/room/:id",{template:"<room></room>"}).otherwise({templateUrl:"/www/app/partials/welcome.partial.htm",controller:"welcomeController",controllerAs:"vm"})}])}(window.angular),function(o){o.module("application").factory("loginService",["$http","$timeout","settings","roomsService",function(o,t,e,n){function r(r){if(m=!0,u=r,r&&!r.displayName){e.fetchRestUrl("/rooms");o.get(e.fetchRestUrl("users/"+r.email.replace(".","_").toLowerCase())).then(function(o){console.log("Setting logged in user from Firebase database after login"),u=o.data,console.log("User fetched from database is",u,o)})}t(function(){n.initializeRoomsFromFirebase(),m=!1,console.log("Logged in user set: ",r)},2e3)}function i(o,t){return m=!0,firebase.auth().signInWithEmailAndPassword(o,t)}function l(){return m=!0,firebase.auth().signInWithPopup(new firebase.auth.GithubAuthProvider)}function a(){return m=!0,firebase.auth().signOut()}function c(){return u}function s(){return m}var u=null,m=!0;return firebase.auth().onAuthStateChanged(r),{login:i,gitLogin:l,logout:a,fetchLoggedInUser:c,fetchIsLoginBusy:s,updateLoginStatus:r}}])}(window.angular);var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o};!function(o){o.module("application").factory("modalService",["$q","settings",function(o,t){function e(e){l.message="Login to "+t.title,l.buttonObj1=null,l.buttonObj2={text:"Login",callback:o.when(e)},l.isLogin=!0}function n(e){l.message="Register for "+t.title,l.buttonObj1=null,l.buttonObj2={text:"Register",callback:o.when(e)},l.isRegister=!0}function r(o,t,e){var n="You didn't use me right";if(t&&"object"!==("undefined"==typeof t?"undefined":_typeof(t)))throw new Error(n);if(e&&"object"!==("undefined"==typeof e?"undefined":_typeof(e)))throw new Error(n);l.message=o,l.buttonObj1=t,l.buttonObj2=e,l.isPrompt=!0}function i(){delete l.buttonObj1,delete l.buttonObj2,l.isLogin=!1,l.isRegister=!1,l.isPrompt=!1,l.message=null}var l={isLogin:!1,isRegister:!1,isPrompt:!1};return{modal:l,showLogin:e,showRegister:n,showPrompt:r,close:i}}])}(window.angular),function(o){o.module("application").factory("navigationService",["$route",function(t){function e(){console.log('Building routes from service "navigationService"');var e=[];return o.forEach(t.routes,function(o){if(!o.redirectTo&&o.controller){var t={url:o.originalPath||"/",name:o.controller.replace(/controller/gi,"")};e.push(t)}}),n("welcome",e)}function n(o,t){return console.log('Arranging "'+o+'" to beginning of routes list'),t.forEach(function(e,n){e.name&&e.name.toLowerCase()===o.toLowerCase()&&(t.splice(n,1),t.splice(0,0,e))}),t}var r=e();return{applicationAngularRoutes:r}}])}(window.angular),function(o){o.module("application").factory("roomsService",["$q","$http",function(o,t){function e(){return r=null,o.when(firebase.database().ref("/rooms/").once("value")).then(function(o){o=o.val?o.val():o.data,console.log(o.length+" rooms fetched from Firebase database"),r=o})}function n(){return r}var r=null;return{initializeRoomsFromFirebase:e,returnFetchedRooms:n}}])}(window.angular),function(o){o.module("application").factory("registerService",["$http","settings","loginService",function(o,t,e){function n(o,t){return console.log("Register user entity: ",o),r(o,t).then(i).then(l)}function r(o,t){return firebase.auth().createUserWithEmailAndPassword(o.email,t).then(function(){return o})}function i(e){return o({url:t.fetchRestUrl("users/"+e.email.replace(".","_").toLowerCase()),method:"PUT",data:e})}function l(o){return e.updateLoginStatus(o.data),o.data}return{register:n}}])}(window.angular),function(o){o.module("application").controller("exercise1Controller",["modalService",function(o){function t(){this.rollButtonText="I changed because you pressed alert",alert("Showing alert!")}function e(){var o=n.possibleColors[Math.floor(Math.random()*n.possibleColors.length)];return o.hex}var n=this;this.showPrompt=function(){o.showPrompt("This is our first test",{text:"Show Alert",callback:t.bind(this)},{text:"Be Quiet"})},function(o){alert(o)}("yes"),this.title="exercise title",this.rollButtonText="Roll Me",this.lastObjectClickedText=null,this.possibleColors=[{name:"Brown",hex:"#A52A2A"},{name:"Blue",hex:"#0000FF"},{name:"Gainsboro",hex:"#DCDCDC"}],this.controllerInitializedObject={name:"Object 1",clickCount:0,color:e()},this.objectArray=[this.controllerInitializedObject],this.rollMethod=function(){this.rollButtonText="I'm Rolled"},this.addNewObject=function(){var o={name:"Object "+(this.objectArray.length+1),clickCount:0,color:e()};this.objectArray.push(o)},this.objectClicked=function(o){o.clickCount++,this.lastObjectClickedText=o.name+" clicked "+o.clickCount+" times",console.log(this.lastObjectClickedText)},this.clearColorFilter=function(){null===this.filter.color&&delete this.filter.color}}])}(window.angular),function(o){o.module("application").controller("exercise2Controller",function(){this.submit=function(){alert("Form submitted")}})}(window.angular),function(o){o.module("application").controller("welcomeController",function(){})}(window.angular),function(o){o.module("application").controller("modalController",["modalService",function(o){this.$onInit=function(){this.close=o.close,this.modal=o.modal,this.isShowingModal=function(){return o.modal.isLogin||o.modal.isRegister||o.modal.isPrompt}}}])}(window.angular),function(o){o.module("application").component("homemadeModal",{templateUrl:"www/app/components/homemadeModal/modal.htm",controller:"modalController",controllerAs:"vm",transclude:!0})}(window.angular),function(o){o.module("application").controller("navigationController",["navigationService",function(o){this.navigation=o.applicationAngularRoutes}])}(window.angular),function(o){o.module("application").component("navigation",{templateUrl:"www/app/components/navigation/navigation.htm",controller:"navigationController",controllerAs:"vm"})}(window.angular),function(o){o.module("application").controller("roomController",["$routeParams","$http",function(o,t){this.$onInit=function(){this.parameters=o,this.roomId=o.id}}])}(window.angular),function(o){o.module("application").component("room",{templateUrl:"www/app/components/room/room.htm",controller:"roomController",controllerAs:"vm"})}(window.angular),function(o){o.module("application").controller("roomsController",["roomsService",function(o){this.$onInit=function(){this.returnFetchedRooms=o.returnFetchedRooms}}])}(window.angular),function(o){o.module("application").component("rooms",{templateUrl:"www/app/components/rooms/rooms.htm",controller:"roomsController",controllerAs:"vm",transclude:!0})}(window.angular),function(o){o.module("application").controller("loggedInUserController",["settings","modalService","loginService",function(o,t,e){this.$onInit=function(){this.applicationLabel=o.title+" v."+o.version,this.fetchLoggedInUser=e.fetchLoggedInUser,this.fetchIsLoginBusy=e.fetchIsLoginBusy,this.logout=e.logout,this.showLogin=t.showLogin,this.showRegister=t.showRegister,this.logoutPrompt=function(){t.showPrompt("Are you sure you want to log out?",{text:"NO, PLEASE DON'T"},{text:"DO IT!  DO IT!",callback:this.logout})}}}])}(window.angular),function(o){o.module("application").component("loggedInUser",{templateUrl:"www/app/components/loggedInUser/loggedInUser.htm",controller:"loggedInUserController",controllerAs:"vm"})}(window.angular),function(o){o.module("application").controller("modalLoginController",["$scope","loginService",function(o,t){this.$onInit=function(){var e=this;this._processError=function(t){e.error=t,o.$apply()},this._processSuccess=function(){e.closeModal(),o.$apply()},this.login=function(o,n){return t.login(o,n).then(e._processSuccess).catch(e._processError)},this.gitLogin=function(){return t.gitLogin().then(e._processSuccess).catch(e._processError)},this.closeModal=function(){e.modal.close(),e.loginform.controls={},e.loginform.$setPristine(),e.error=null}}}])}(window.angular),function(o){o.module("application").component("modalLogin",{require:{modal:"^homemadeModal"},templateUrl:"www/app/components/homemadeModal/modalLogin/modalLogin.htm",controller:"modalLoginController",controllerAs:"vm"})}(window.angular),function(o){o.module("application").controller("modalPromptController",function(){this.$onInit=function(){this.close=this.modal.close,this.modal=this.modal.modal}})}(window.angular),function(o){o.module("application").component("modalPrompt",{require:{modal:"^homemadeModal"},templateUrl:"www/app/components/homemadeModal/modalPrompt/modalPrompt.htm",controller:"modalPromptController",controllerAs:"vm"})}(window.angular),function(o){o.module("application").controller("modalRegisterController",["$scope","registerService",function(o,t){this.$onInit=function(){var e=this;this._processError=function(t){e.error=t,o.$apply()},this._processSuccess=function(t){e.closeModal(),o.$apply()},this.register=function(o,n){return t.register(o,n).then(e._processSuccess).catch(e._processError)},this.closeModal=function(){e.modal.close(),e.registerform.controls={},e.registerform.$setPristine(),e.error=null}}}])}(window.angular),function(o){o.module("application").component("modalRegister",{require:{modal:"^homemadeModal"},templateUrl:"www/app/components/homemadeModal/modalRegister/modalRegister.htm",controller:"modalRegisterController",controllerAs:"vm"})}(window.angular);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIiwic2VydmljZXMvbG9naW4uc2VydmljZS5qcyIsImFwcC5taW4uanMiLCJzZXJ2aWNlcy9tb2RhbC5zZXJ2aWNlLmpzIiwiY29tcG9uZW50cy9uYXZpZ2F0aW9uL25hdmlnYXRpb24uc2VydmljZS5qcyIsImNvbXBvbmVudHMvcm9vbXMvcm9vbXMuc2VydmljZS5qcyIsImNvbXBvbmVudHMvaG9tZW1hZGVNb2RhbC9tb2RhbFJlZ2lzdGVyL3JlZ2lzdGVyLnNlcnZpY2UuanMiLCJjb250cm9sbGVycy9leGVyY2lzZTEuY29udHJvbGxlci5qcyIsImNvbnRyb2xsZXJzL2V4ZXJjaXNlMi5jb250cm9sbGVyLmpzIiwiY29udHJvbGxlcnMvd2VsY29tZS5jb250cm9sbGVyLmpzIiwiY29tcG9uZW50cy9ob21lbWFkZU1vZGFsL21vZGFsLmNvbnRyb2xsZXIuanMiLCJjb21wb25lbnRzL2hvbWVtYWRlTW9kYWwvbW9kYWwuanMiLCJjb21wb25lbnRzL25hdmlnYXRpb24vbmF2aWdhdGlvbi5jb250cm9sbGVyLmpzIiwiY29tcG9uZW50cy9uYXZpZ2F0aW9uL25hdmlnYXRpb24uanMiLCJjb21wb25lbnRzL3Jvb20vcm9vbS5jb250cm9sbGVyLmpzIiwiY29tcG9uZW50cy9yb29tL3Jvb20uanMiLCJjb21wb25lbnRzL3Jvb21zL3Jvb21zLmNvbnRyb2xsZXIuanMiLCJjb21wb25lbnRzL3Jvb21zL3Jvb21zLmpzIiwiY29tcG9uZW50cy9sb2dnZWRJblVzZXIvbG9nZ2VkSW5Vc2VyLmNvbnRyb2xsZXIuanMiLCJjb21wb25lbnRzL2xvZ2dlZEluVXNlci9sb2dnZWRJblVzZXIuanMiLCJjb21wb25lbnRzL2hvbWVtYWRlTW9kYWwvbW9kYWxMb2dpbi9tb2RhbExvZ2luLmNvbnRyb2xsZXIuanMiLCJjb21wb25lbnRzL2hvbWVtYWRlTW9kYWwvbW9kYWxMb2dpbi9tb2RhbExvZ2luLmpzIiwiY29tcG9uZW50cy9ob21lbWFkZU1vZGFsL21vZGFsUHJvbXB0L21vZGFsUHJvbXB0LmNvbnRyb2xsZXIuanMiLCJjb21wb25lbnRzL2hvbWVtYWRlTW9kYWwvbW9kYWxQcm9tcHQvbW9kYWxQcm9tcHQuanMiLCJjb21wb25lbnRzL2hvbWVtYWRlTW9kYWwvbW9kYWxSZWdpc3Rlci9tb2RhbFJlZ2lzdGVyLmNvbnRyb2xsZXIuanMiLCJjb21wb25lbnRzL2hvbWVtYWRlTW9kYWwvbW9kYWxSZWdpc3Rlci9tb2RhbFJlZ2lzdGVyLmpzIl0sIm5hbWVzIjpbImFuZ3VsYXIiLCJhcHBsaWNhdGlvbkdsb2JhbFNldHRpbmdzIiwidGl0bGUiLCJ2ZXJzaW9uIiwiYXV0aG9yIiwiZmV0Y2hSZXN0VXJsIiwic3VmZml4IiwidmVuZG9yVXJsIiwidXJsRXh0IiwibW9kdWxlIiwiY29uc3RhbnQiLCJjb25maWciLCIkbG9jYXRpb25Qcm92aWRlciIsIiRyb3V0ZVByb3ZpZGVyIiwiaHRtbDVNb2RlIiwid2hlbiIsInRlbXBsYXRlVXJsIiwiY29udHJvbGxlciIsImNvbnRyb2xsZXJBcyIsInRlbXBsYXRlIiwib3RoZXJ3aXNlIiwid2luZG93IiwiZmFjdG9yeSIsIiRodHRwIiwiJHRpbWVvdXQiLCJzZXR0aW5ncyIsInJvb21zU2VydmljZSIsInVwZGF0ZUxvZ2luU3RhdHVzIiwibG9nZ2VkSW5Vc2VyUmVzcG9uc2UiLCJpc1NlcnZpY2VCdXN5IiwibG9nZ2VkSW5Vc2VyIiwiZGlzcGxheU5hbWUiLCJnZXQiLCJlbWFpbCIsInJlcGxhY2UiLCJ0b0xvd2VyQ2FzZSIsInRoZW4iLCJyZXN1bHRzIiwiY29uc29sZSIsImxvZyIsImRhdGEiLCJpbml0aWFsaXplUm9vbXNGcm9tRmlyZWJhc2UiLCJsb2dpbiIsInVzZXJuYW1lUGFyYW0iLCJwYXNzd29yZFBhcmFtIiwiZmlyZWJhc2UiLCJhdXRoIiwic2lnbkluV2l0aEVtYWlsQW5kUGFzc3dvcmQiLCJnaXRMb2dpbiIsInNpZ25JbldpdGhQb3B1cCIsIkdpdGh1YkF1dGhQcm92aWRlciIsImxvZ291dCIsInNpZ25PdXQiLCJmZXRjaExvZ2dlZEluVXNlciIsImZldGNoSXNMb2dpbkJ1c3kiLCJvbkF1dGhTdGF0ZUNoYW5nZWQiLCJfdHlwZW9mIiwiU3ltYm9sIiwiaXRlcmF0b3IiLCJvYmoiLCJjb25zdHJ1Y3RvciIsInByb3RvdHlwZSIsIiRxIiwic2hvd0xvZ2luIiwiY2FsbGJhY2siLCJtb2RhbCIsIm1lc3NhZ2UiLCJidXR0b25PYmoxIiwiYnV0dG9uT2JqMiIsInRleHQiLCJpc0xvZ2luIiwic2hvd1JlZ2lzdGVyIiwiaXNSZWdpc3RlciIsInNob3dQcm9tcHQiLCJlcnJvclN0cmluZyIsIkVycm9yIiwiaXNQcm9tcHQiLCJjbG9zZSIsIiRyb3V0ZSIsIl9mZXRjaFJvdXRlc1BhaXJzIiwicmV0dXJuQXJyYXlPZlVybE5hbWVQYWlycyIsImZvckVhY2giLCJyb3V0ZXMiLCJyIiwicmVkaXJlY3RUbyIsInJvdXRlVXJsTmFtZVBhaXIiLCJ1cmwiLCJvcmlnaW5hbFBhdGgiLCJuYW1lIiwicHVzaCIsIl9hcnJhbmdlUm91dGVFbGVtZW50VG9GaXJzdCIsInJvdXRlTmFtZSIsImFycmF5IiwiZWxlbWVudEluQXJyYXkiLCJpbmRleE9mRWxlbWVudCIsInNwbGljZSIsImFwcGxpY2F0aW9uQW5ndWxhclJvdXRlcyIsIl9yb29tc0Zyb21GaXJlYmFzZSIsImRhdGFiYXNlIiwicmVmIiwib25jZSIsInJvb21zIiwidmFsIiwibGVuZ3RoIiwicmV0dXJuRmV0Y2hlZFJvb21zIiwibG9naW5TZXJ2aWNlIiwicmVnaXN0ZXIiLCJwYXNzd29yZCIsImNyZWF0ZUZpcmViYXNlQXV0aGVudGljYXRpb24iLCJ3cml0ZUZvcm1EYXRhVG9GaXJlYmFzZSIsInJldHVybkRhdGFGcm9tUmVzdWx0cyIsImNyZWF0ZVVzZXJXaXRoRW1haWxBbmRQYXNzd29yZCIsIm1ldGhvZCIsIm1vZGFsU2VydmljZSIsInNob3dBbGVydENhbGxiYWNrIiwidGhpcyIsInJvbGxCdXR0b25UZXh0IiwiYWxlcnQiLCJfZ2V0UmFuZG9tQ29sb3IiLCJyYW5kb21Db2xvciIsInZtIiwicG9zc2libGVDb2xvcnMiLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJoZXgiLCJiaW5kIiwibm8iLCJsYXN0T2JqZWN0Q2xpY2tlZFRleHQiLCJjb250cm9sbGVySW5pdGlhbGl6ZWRPYmplY3QiLCJjbGlja0NvdW50IiwiY29sb3IiLCJvYmplY3RBcnJheSIsInJvbGxNZXRob2QiLCJhZGROZXdPYmplY3QiLCJuZXdPYmplY3QiLCJvYmplY3RDbGlja2VkIiwiY2xlYXJDb2xvckZpbHRlciIsImZpbHRlciIsInN1Ym1pdCIsIiRvbkluaXQiLCJpc1Nob3dpbmdNb2RhbCIsImNvbXBvbmVudCIsInRyYW5zY2x1ZGUiLCJuYXZpZ2F0aW9uIiwiJHJvdXRlUGFyYW1zIiwicGFyYW1ldGVycyIsInJvb21JZCIsImlkIiwiYXBwbGljYXRpb25MYWJlbCIsImxvZ291dFByb21wdCIsIiRzY29wZSIsIl90aGlzIiwiX3Byb2Nlc3NFcnJvciIsImVycm9yIiwiJGFwcGx5IiwiX3Byb2Nlc3NTdWNjZXNzIiwiY2xvc2VNb2RhbCIsInVzZXJQYXJhbSIsImNhdGNoIiwibG9naW5mb3JtIiwiY29udHJvbHMiLCIkc2V0UHJpc3RpbmUiLCJyZXF1aXJlIiwicmVnaXN0ZXJTZXJ2aWNlIiwicmVnaXN0ZXJGb3JtRGF0YSIsInJlZ2lzdGVyZm9ybSJdLCJtYXBwaW5ncyI6IkFBQUEsY0FFQyxTQUFTQSxHQUNULEdBQU1DLElBQ0xDLE1BQW1CLDhDQUNuQkMsUUFBbUIsR0FDbkJDLE9BQW1CLGtCQUNuQkMsYUFBbUIsU0FBQUMsR0FDbEIsR0FBS0EsRUFBTCxDQUVBLEdBQU1DLEdBQVksMkNBQ1pDLEVBQVMsT0FFZixPQUFPRCxHQUFZRCxFQUFTRSxJQUk5QlIsR0FDRVMsT0FBTyxlQUFnQixZQUN2QkMsU0FBUyxXQUFZVCxHQUNyQlUsUUFBQUEsb0JBQUFBLGlCQUNBLFNBQVVDLEVBQW1CQyxHQUM1QkQsRUFBa0JFLFdBQVUsR0FFNUJELEVBQ0VFLEtBQUssY0FDTEMsWUFBYSwwQ0FDYkMs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LEVBQUtjLGFBQWFMLFlBQ2xCVCxFQUFLYyxhQUFhSixlQUNsQlYsRUFBS0UsTUFBUSxXQUloQnJJLE9BQU9yQixTQ25DUixTQUFVQSxHQUNWQSxFQUNFUyxPQUFPLGVBQ1BxSSxVQUFVLGlCQUNWcUIsU0FDQ2xHLE1BQU8sa0JBRVJqRCxZQUFlLG1FQUNmQyxXQUFlLDBCQUNmQyxhQUFlLFFBRWZHLE9BQU9yQiIsImZpbGUiOiJhcHAubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG4oZnVuY3Rpb24oYW5ndWxhcikge1xyXG5cdGNvbnN0IGFwcGxpY2F0aW9uR2xvYmFsU2V0dGluZ3MgPSB7XHJcblx0XHR0aXRsZSAgICAgICAgICAgIDogXCJBbmd1bGFyIEV4ZXJjaXNlcyAvIFJlc2VydmF0aW9uIEFwcGxpY2F0aW9uXCIsXHJcblx0XHR2ZXJzaW9uICAgICAgICAgIDogMC45LFxyXG5cdFx0YXV0aG9yICAgICAgICAgICA6IFwiSm9zaCBSLiBEdW5sYXZ5XCIsXHJcblx0XHRmZXRjaFJlc3RVcmwgICAgIDogc3VmZml4ID0+IHtcclxuXHRcdFx0aWYgKCFzdWZmaXgpIHJldHVybjtcclxuXHJcblx0XHRcdGNvbnN0IHZlbmRvclVybCA9IFwiaHR0cHM6Ly9jb25mZGVjb25mbGljdG9yLmZpcmViYXNlaW8uY29tL1wiO1xyXG5cdFx0XHRjb25zdCB1cmxFeHQgPSBcIi5qc29uXCI7XHJcblxyXG5cdFx0XHRyZXR1cm4gdmVuZG9yVXJsICsgc3VmZml4ICsgdXJsRXh0O1xyXG5cdFx0fVxyXG5cdH07XHJcblxyXG5cdGFuZ3VsYXJcclxuXHRcdC5tb2R1bGUoXCJhcHBsaWNhdGlvblwiLCBbXCJuZ1JvdXRlXCJdKVxyXG5cdFx0LmNvbnN0YW50KFwic2V0dGluZ3NcIiwgYXBwbGljYXRpb25HbG9iYWxTZXR0aW5ncylcclxuXHRcdC5jb25maWcoXHJcblx0XHRcdGZ1bmN0aW9uICgkbG9jYXRpb25Qcm92aWRlciwgJHJvdXRlUHJvdmlkZXIpIHtcclxuXHRcdFx0XHQkbG9jYXRpb25Qcm92aWRlci5odG1sNU1vZGUodHJ1ZSk7XHJcblxyXG5cdFx0XHRcdCRyb3V0ZVByb3ZpZGVyXHJcblx0XHRcdFx0XHQud2hlbihcIi9leGVyY2lzZTFcIiwge1xyXG5cdFx0XHRcdFx0XHR0ZW1wbGF0ZVVybDogXCIvd3d3L2FwcC9wYXJ0aWFscy9leGVyY2lzZTEucGFydGlhbC5odG1cIixcclxuXHRcdFx0XHRcdFx0Y29udHJvbGxlcjogXCJleGVyY2lzZTFDb250cm9sbGVyXCIsXHJcblx0XHRcdFx0XHRcdGNvbnRyb2xsZXJBczogXCJ2bVwiXHJcblx0XHRcdFx0XHR9KVxyXG5cdFx0XHRcdFx0LndoZW4oXCIvZXhlcmNpc2UyXCIsIHtcclxuXHRcdFx0XHRcdFx0dGVtcGxhdGVVcmw6IFwiL3d3dy9hcHAvcGFydGlhbHMvZXhlcmNpc2UyLnBhcnRpYWwuaHRtXCIsXHJcblx0XHRcdFx0XHRcdGNvbnRyb2xsZXI6IFwiZXhlcmNpc2UyQ29udHJvbGxlclwiLFxyXG5cdFx0XHRcdFx0XHRjb250cm9sbGVyQXM6IFwidm1cIlxyXG5cdFx0XHRcdFx0fSlcclxuXHRcdFx0XHRcdC53aGVuKFwiL3Jvb20vOmlkXCIsIHtcclxuXHRcdFx0XHRcdFx0dGVtcGxhdGU6IFwiPHJvb20+PC9yb29tPlwiLFxyXG5cdFx0XHRcdFx0fSlcclxuXHRcdFx0XHRcdC5vdGhlcndpc2Uoe1xyXG5cdFx0XHRcdFx0XHR0ZW1wbGF0ZVVybDogXCIvd3d3L2FwcC9wYXJ0aWFscy93ZWxjb21lLnBhcnRpYWwuaHRtXCIsXHJcblx0XHRcdFx0XHRcdGNvbnRyb2xsZXI6IFwid2VsY29tZUNvbnRyb2xsZXJcIixcclxuXHRcdFx0XHRcdFx0Y29udHJvbGxlckFzOiBcInZtXCJcclxuXHRcdFx0XHRcdH0pO1xyXG5cdFx0XHR9KVxyXG59KHdpbmRvdy5hbmd1bGFyKSk7IiwiKGZ1bmN0aW9uKGFuZ3VsYXIpIHtcclxuXHRhbmd1bGFyXHJcblx0XHQubW9kdWxlKFwiYXBwbGljYXRpb25cIilcclxuXHRcdC5mYWN0b3J5KFwibG9naW5TZXJ2aWNlXCIsXHJcblx0XHRcdFtcIiRodHRwXCIsIFwiJHRpbWVvdXRcIiwgXCJzZXR0aW5nc1wiLCBcInJvb21zU2VydmljZVwiLFxyXG5cdFx0XHQgZnVuY3Rpb24oJGh0dHAsICR0aW1lb3V0LCBzZXR0aW5ncywgcm9vbXNTZXJ2aWNlKSB7XHJcblxyXG5cdFx0XHQvLyB0aGlzIHZhcmlhYmxlIHdpbGwga2VlcCB0cmFjayBvZiBvdXIgbG9nZ2VkIGluIHVzZXJcclxuXHRcdFx0bGV0IGxvZ2dlZEluVXNlciA9IG51bGw7XHJcblxyXG5cdFx0XHQvLyB0aGlzIHZhcmlhYmxlIHdpbGwgaGVscCBzaG93IHRoZSBsb2FkaW5nIGFzdGVyaXNrIGluIHRoZSB0b3AtcmlnaHQgY29ybmVyXHJcblx0XHRcdGxldCBpc1NlcnZpY2VCdXN5ID0gdHJ1ZTtcclxuXHJcblx0XHRcdC8vIGFjdGl2ZWx5IHdhdGNoZXMgRmlyZWJhc2UgYXV0aGVudGljYXRpb24gYW5kIHByb3BhZ2F0ZXMgdXNlciByZXN1bHRzIHRvIG91ciBzZXJ2aWNlIHZhcmlhYmxlXHJcblx0XHRcdGZpcmViYXNlLmF1dGgoKS5vbkF1dGhTdGF0ZUNoYW5nZWQodXBkYXRlTG9naW5TdGF0dXMpO1xyXG5cclxuXHRcdFx0cmV0dXJuIHtcclxuXHRcdFx0XHRsb2dpbixcclxuXHRcdFx0XHRnaXRMb2dpbixcclxuXHRcdFx0XHRsb2dvdXQsXHJcblx0XHRcdFx0ZmV0Y2hMb2dnZWRJblVzZXIsXHJcblx0XHRcdFx0ZmV0Y2hJc0xvZ2luQnVzeSxcclxuXHRcdFx0XHR1cGRhdGVMb2dpblN0YXR1c1xyXG5cdFx0XHR9O1xyXG5cclxuXHRcdFx0ZnVuY3Rpb24gdXBkYXRlTG9naW5TdGF0dXMobG9nZ2VkSW5Vc2VyUmVzcG9uc2UpIHtcclxuXHRcdFx0XHRpc1NlcnZpY2VCdXN5ID0gdHJ1ZTtcclxuXHJcblx0XHRcdFx0bG9nZ2VkSW5Vc2VyID0gbG9nZ2VkSW5Vc2VyUmVzcG9uc2U7XHJcblxyXG5cdFx0XHRcdGlmIChsb2dnZWRJblVzZXJSZXNwb25zZSAmJiAhbG9nZ2VkSW5Vc2VyUmVzcG9uc2UuZGlzcGxheU5hbWUpIHtcclxuXHRcdFx0XHRcdGxldCB1cmwgPSBzZXR0aW5ncy5mZXRjaFJlc3RVcmwoXCIvcm9vbXNcIik7XHJcblx0XHRcdFx0XHQvLyB1c2UgRmlyZWJhc2UgU0RLIHRvIGZldGNoIGZyb20gdXNlcnNcclxuXHRcdFx0XHRcdCRodHRwLmdldChzZXR0aW5ncy5mZXRjaFJlc3RVcmwoXCJ1c2Vycy9cIiArIGxvZ2dlZEluVXNlclJlc3BvbnNlLmVtYWlsLnJlcGxhY2UoXCIuXCIsIFwiX1wiKS50b0xvd2VyQ2FzZSgpKSlcclxuXHRcdFx0XHRcdFx0LnRoZW4oZnVuY3Rpb24ocmVzdWx0cykge1xyXG5cdFx0XHRcdFx0XHRcdGNvbnNvbGUubG9nKFwiU2V0dGluZyBsb2dnZWQgaW4gdXNlciBmcm9tIEZpcmViYXNlIGRhdGFiYXNlIGFmdGVyIGxvZ2luXCIpO1xyXG5cdFx0XHRcdFx0XHRcdGxvZ2dlZEluVXNlciA9IHJlc3VsdHMuZGF0YTtcclxuXHRcdFx0XHRcdFx0XHRjb25zb2xlLmxvZyhcIlVzZXIgZmV0Y2hlZCBmcm9tIGRhdGFiYXNlIGlzXCIsIGxvZ2dlZEluVXNlciwgcmVzdWx0cyk7XHJcblx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0Ly8gdXNlIEFuZ3VsYXIncyB0aW1lb3V0IHNvIHdlIGNhbiBzZWUgdGhlIGxvYWRpbmcgaW4gb3VyIHRvcC1yaWdodCBsb2dpbiBzZWN0aW9uXHJcblx0XHRcdFx0Ly8gQW5ndWxhcidzIHRpbWVvdXQgYXV0b21hdGljYWxseSB0cmlnZ2VycyBhIGRpZ2VzdCBzbyBiaW5kaW5ncyB1cGRhdGUgd2hlbiBpdFxyXG5cdFx0XHRcdC8vIGNvbXBsZXRlc1xyXG5cdFx0XHRcdCR0aW1lb3V0KGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdFx0cm9vbXNTZXJ2aWNlLmluaXRpYWxpemVSb29tc0Zyb21GaXJlYmFzZSgpO1xyXG5cdFx0XHRcdFx0aXNTZXJ2aWNlQnVzeSA9IGZhbHNlO1xyXG5cdFx0XHRcdFx0Y29uc29sZS5sb2coXCJMb2dnZWQgaW4gdXNlciBzZXQ6IFwiLCBsb2dnZWRJblVzZXJSZXNwb25zZSk7XHJcblx0XHRcdFx0fSwgMjAwMCk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdGZ1bmN0aW9uIGxvZ2luKHVzZXJuYW1lUGFyYW0sIHBhc3N3b3JkUGFyYW0pIHtcclxuXHRcdFx0XHRpc1NlcnZpY2VCdXN5ID0gdHJ1ZTtcclxuXHJcblx0XHRcdFx0cmV0dXJuIGZpcmViYXNlLmF1dGgoKS5zaWduSW5XaXRoRW1haWxBbmRQYXNzd29yZCh1c2VybmFtZVBhcmFtLCBwYXNzd29yZFBhcmFtKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0ZnVuY3Rpb24gZ2l0TG9naW4oKSB7XHJcblx0XHRcdFx0aXNTZXJ2aWNlQnVzeSA9IHRydWU7XHJcblxyXG5cdFx0XHRcdHJldHVybiBmaXJlYmFzZS5hdXRoKCkuc2lnbkluV2l0aFBvcHVwKG5ldyBmaXJlYmFzZS5hdXRoLkdpdGh1YkF1dGhQcm92aWRlcigpKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0ZnVuY3Rpb24gbG9nb3V0KCkge1xyXG5cdFx0XHRcdGlzU2VydmljZUJ1c3kgPSB0cnVlO1xyXG5cclxuXHRcdFx0XHRyZXR1cm4gZmlyZWJhc2UuYXV0aCgpLnNpZ25PdXQoKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0ZnVuY3Rpb24gZmV0Y2hMb2dnZWRJblVzZXIoKSB7XHJcblx0XHRcdFx0cmV0dXJuIGxvZ2dlZEluVXNlcjtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0ZnVuY3Rpb24gZmV0Y2hJc0xvZ2luQnVzeSgpIHtcclxuXHRcdFx0XHRyZXR1cm4gaXNTZXJ2aWNlQnVzeTtcclxuXHRcdFx0fVxyXG5cdFx0fV0pO1xyXG59KHdpbmRvdy5hbmd1bGFyKSlcclxuIiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbihmdW5jdGlvbiAoYW5ndWxhcikge1xuXHR2YXIgYXBwbGljYXRpb25HbG9iYWxTZXR0aW5ncyA9IHtcblx0XHR0aXRsZTogXCJBbmd1bGFyIEV4ZXJjaXNlcyAvIFJlc2VydmF0aW9uIEFwcGxpY2F0aW9uXCIsXG5cdFx0dmVyc2lvbjogMC45LFxuXHRcdGF1dGhvcjogXCJKb3NoIFIuIER1bmxhdnlcIixcblx0XHRmZXRjaFJlc3RVcmw6IGZ1bmN0aW9uIGZldGNoUmVzdFVybChzdWZmaXgpIHtcblx0XHRcdGlmICghc3VmZml4KSByZXR1cm47XG5cblx0XHRcdHZhciB2ZW5kb3JVcmwgPSBcImh0dHBzOi8vY29uZmRlY29uZmxpY3Rvci5maXJlYmFzZWlvLmNvbS9cIjtcblx0XHRcdHZhciB1cmxFeHQgPSBcIi5qc29uXCI7XG5cblx0XHRcdHJldHVybiB2ZW5kb3JVcmwgKyBzdWZmaXggKyB1cmxFeHQ7XG5cdFx0fVxuXHR9O1xuXG5cdGFuZ3VsYXIubW9kdWxlKFwiYXBwbGljYXRpb25cIiwgW1wibmdSb3V0ZVwiXSkuY29uc3RhbnQoXCJzZXR0aW5nc1wiLCBhcHBsaWNhdGlvbkdsb2JhbFNldHRpbmdzKS5jb25maWcoZnVuY3Rpb24gKCRsb2NhdGlvblByb3ZpZGVyLCAkcm91dGVQcm92aWRlcikge1xuXHRcdCRsb2NhdGlvblByb3ZpZGVyLmh0bWw1TW9kZSh0cnVlKTtcblxuXHRcdCRyb3V0ZVByb3ZpZGVyLndoZW4oXCIvZXhlcmNpc2UxXCIsIHtcblx0XHRcdHRlbXBsYXRlVXJsOiBcIi93d3cvYXBwL3BhcnRpYWxzL2V4ZXJjaXNlMS5wYXJ0aWFsLmh0bVwiLFxuXHRcdFx0Y29udHJvbGxlcjogXCJleGVyY2lzZTFDb250cm9sbGVyXCIsXG5cdFx0XHRjb250cm9sbGVyQXM6IFwidm1cIlxuXHRcdH0pLndoZW4oXCIvZXhlcmNpc2UyXCIsIHtcblx0XHRcdHRlbXBsYXRlVXJsOiBcIi93d3cvYXBwL3BhcnRpYWxzL2V4ZXJjaXNlMi5wYXJ0aWFsLmh0bVwiLFxuXHRcdFx0Y29udHJvbGxlcjogXCJleGVyY2lzZTJDb250cm9sbGVyXCIsXG5cdFx0XHRjb250cm9sbGVyQXM6IFwidm1cIlxuXHRcdH0pLndoZW4oXCIvcm9vbS86aWRcIiwge1xuXHRcdFx0dGVtcGxhdGU6IFwiPHJvb20+PC9yb29tPlwiXG5cdFx0fSkub3RoZXJ3aXNlKHtcblx0XHRcdHRlbXBsYXRlVXJsOiBcIi93d3cvYXBwL3BhcnRpYWxzL3dlbGNvbWUucGFydGlhbC5odG1cIixcblx0XHRcdGNvbnRyb2xsZXI6IFwid2VsY29tZUNvbnRyb2xsZXJcIixcblx0XHRcdGNvbnRyb2xsZXJBczogXCJ2bVwiXG5cdFx0fSk7XG5cdH0pO1xufSkod2luZG93LmFuZ3VsYXIpO1xuXCJ1c2Ugc3RyaWN0XCI7XG5cbihmdW5jdGlvbiAoYW5ndWxhcikge1xuXHRhbmd1bGFyLm1vZHVsZShcImFwcGxpY2F0aW9uXCIpLmZhY3RvcnkoXCJsb2dpblNlcnZpY2VcIiwgW1wiJGh0dHBcIiwgXCIkdGltZW91dFwiLCBcInNldHRpbmdzXCIsIFwicm9vbXNTZXJ2aWNlXCIsIGZ1bmN0aW9uICgkaHR0cCwgJHRpbWVvdXQsIHNldHRpbmdzLCByb29tc1NlcnZpY2UpIHtcblxuXHRcdC8vIHRoaXMgdmFyaWFibGUgd2lsbCBrZWVwIHRyYWNrIG9mIG91ciBsb2dnZWQgaW4gdXNlclxuXHRcdHZhciBsb2dnZWRJblVzZXIgPSBudWxsO1xuXG5cdFx0Ly8gdGhpcyB2YXJpYWJsZSB3aWxsIGhlbHAgc2hvdyB0aGUgbG9hZGluZyBhc3RlcmlzayBpbiB0aGUgdG9wLXJpZ2h0IGNvcm5lclxuXHRcdHZhciBpc1NlcnZpY2VCdXN5ID0gdHJ1ZTtcblxuXHRcdC8vIGFjdGl2ZWx5IHdhdGNoZXMgRmlyZWJhc2UgYXV0aGVudGljYXRpb24gYW5kIHByb3BhZ2F0ZXMgdXNlciByZXN1bHRzIHRvIG91ciBzZXJ2aWNlIHZhcmlhYmxlXG5cdFx0ZmlyZWJhc2UuYXV0aCgpLm9uQXV0aFN0YXRlQ2hhbmdlZCh1cGRhdGVMb2dpblN0YXR1cyk7XG5cblx0XHRyZXR1cm4ge1xuXHRcdFx0bG9naW46IGxvZ2luLFxuXHRcdFx0Z2l0TG9naW46IGdpdExvZ2luLFxuXHRcdFx0bG9nb3V0OiBsb2dvdXQsXG5cdFx0XHRmZXRjaExvZ2dlZEluVXNlcjogZmV0Y2hMb2dnZWRJblVzZXIsXG5cdFx0XHRmZXRjaElzTG9naW5CdXN5OiBmZXRjaElzTG9naW5CdXN5LFxuXHRcdFx0dXBkYXRlTG9naW5TdGF0dXM6IHVwZGF0ZUxvZ2luU3RhdHVzXG5cdFx0fTtcblxuXHRcdGZ1bmN0aW9uIHVwZGF0ZUxvZ2luU3RhdHVzKGxvZ2dlZEluVXNlclJlc3BvbnNlKSB7XG5cdFx0XHRpc1NlcnZpY2VCdXN5ID0gdHJ1ZTtcblxuXHRcdFx0bG9nZ2VkSW5Vc2VyID0gbG9nZ2VkSW5Vc2VyUmVzcG9uc2U7XG5cblx0XHRcdGlmIChsb2dnZWRJblVzZXJSZXNwb25zZSAmJiAhbG9nZ2VkSW5Vc2VyUmVzcG9uc2UuZGlzcGxheU5hbWUpIHtcblx0XHRcdFx0dmFyIHVybCA9IHNldHRpbmdzLmZldGNoUmVzdFVybChcIi9yb29tc1wiKTtcblx0XHRcdFx0Ly8gdXNlIEZpcmViYXNlIFNESyB0byBmZXRjaCBmcm9tIHVzZXJzXG5cdFx0XHRcdCRodHRwLmdldChzZXR0aW5ncy5mZXRjaFJlc3RVcmwoXCJ1c2Vycy9cIiArIGxvZ2dlZEluVXNlclJlc3BvbnNlLmVtYWlsLnJlcGxhY2UoXCIuXCIsIFwiX1wiKS50b0xvd2VyQ2FzZSgpKSkudGhlbihmdW5jdGlvbiAocmVzdWx0cykge1xuXHRcdFx0XHRcdGNvbnNvbGUubG9nKFwiU2V0dGluZyBsb2dnZWQgaW4gdXNlciBmcm9tIEZpcmViYXNlIGRhdGFiYXNlIGFmdGVyIGxvZ2luXCIpO1xuXHRcdFx0XHRcdGxvZ2dlZEluVXNlciA9IHJlc3VsdHMuZGF0YTtcblx0XHRcdFx0XHRjb25zb2xlLmxvZyhcIlVzZXIgZmV0Y2hlZCBmcm9tIGRhdGFiYXNlIGlzXCIsIGxvZ2dlZEluVXNlciwgcmVzdWx0cyk7XG5cdFx0XHRcdH0pO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyB1c2UgQW5ndWxhcidzIHRpbWVvdXQgc28gd2UgY2FuIHNlZSB0aGUgbG9hZGluZyBpbiBvdXIgdG9wLXJpZ2h0IGxvZ2luIHNlY3Rpb25cblx0XHRcdC8vIEFuZ3VsYXIncyB0aW1lb3V0IGF1dG9tYXRpY2FsbHkgdHJpZ2dlcnMgYSBkaWdlc3Qgc28gYmluZGluZ3MgdXBkYXRlIHdoZW4gaXRcblx0XHRcdC8vIGNvbXBsZXRlc1xuXHRcdFx0JHRpbWVvdXQoZnVuY3Rpb24gKCkge1xuXHRcdFx0XHRyb29tc1NlcnZpY2UuaW5pdGlhbGl6ZVJvb21zRnJvbUZpcmViYXNlKCk7XG5cdFx0XHRcdGlzU2VydmljZUJ1c3kgPSBmYWxzZTtcblx0XHRcdFx0Y29uc29sZS5sb2coXCJMb2dnZWQgaW4gdXNlciBzZXQ6IFwiLCBsb2dnZWRJblVzZXJSZXNwb25zZSk7XG5cdFx0XHR9LCAyMDAwKTtcblx0XHR9XG5cblx0XHRmdW5jdGlvbiBsb2dpbih1c2VybmFtZVBhcmFtLCBwYXNzd29yZFBhcmFtKSB7XG5cdFx0XHRpc1NlcnZpY2VCdXN5ID0gdHJ1ZTtcblxuXHRcdFx0cmV0dXJuIGZpcmViYXNlLmF1dGgoKS5zaWduSW5XaXRoRW1haWxBbmRQYXNzd29yZCh1c2VybmFtZVBhcmFtLCBwYXNzd29yZFBhcmFtKTtcblx0XHR9XG5cblx0XHRmdW5jdGlvbiBnaXRMb2dpbigpIHtcblx0XHRcdGlzU2VydmljZUJ1c3kgPSB0cnVlO1xuXG5cdFx0XHRyZXR1cm4gZmlyZWJhc2UuYXV0aCgpLnNpZ25JbldpdGhQb3B1cChuZXcgZmlyZWJhc2UuYXV0aC5HaXRodWJBdXRoUHJvdmlkZXIoKSk7XG5cdFx0fVxuXG5cdFx0ZnVuY3Rpb24gbG9nb3V0KCkge1xuXHRcdFx0aXNTZXJ2aWNlQnVzeSA9IHRydWU7XG5cblx0XHRcdHJldHVybiBmaXJlYmFzZS5hdXRoKCkuc2lnbk91dCgpO1xuXHRcdH1cblxuXHRcdGZ1bmN0aW9uIGZldGNoTG9nZ2VkSW5Vc2VyKCkge1xuXHRcdFx0cmV0dXJuIGxvZ2dlZEluVXNlcjtcblx0XHR9XG5cblx0XHRmdW5jdGlvbiBmZXRjaElzTG9naW5CdXN5KCkge1xuXHRcdFx0cmV0dXJuIGlzU2VydmljZUJ1c3k7XG5cdFx0fVxuXHR9XSk7XG59KSh3aW5kb3cuYW5ndWxhcik7XG5cInVzZSBzdHJpY3RcIjtcblxudmFyIF90eXBlb2YgPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA9PT0gXCJzeW1ib2xcIiA/IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIHR5cGVvZiBvYmo7IH0gOiBmdW5jdGlvbiAob2JqKSB7IHJldHVybiBvYmogJiYgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG9iaiAhPT0gU3ltYm9sLnByb3RvdHlwZSA/IFwic3ltYm9sXCIgOiB0eXBlb2Ygb2JqOyB9O1xuXG4oZnVuY3Rpb24gKGFuZ3VsYXIpIHtcblx0YW5ndWxhci5tb2R1bGUoXCJhcHBsaWNhdGlvblwiKS5mYWN0b3J5KFwibW9kYWxTZXJ2aWNlXCIsIFtcIiRxXCIsIFwic2V0dGluZ3NcIiwgZnVuY3Rpb24gKCRxLCBzZXR0aW5ncykge1xuXHRcdHZhciBtb2RhbCA9IHtcblx0XHRcdGlzTG9naW46IGZhbHNlLFxuXHRcdFx0aXNSZWdpc3RlcjogZmFsc2UsXG5cdFx0XHRpc1Byb21wdDogZmFsc2Vcblx0XHR9O1xuXG5cdFx0cmV0dXJuIHtcblx0XHRcdG1vZGFsOiBtb2RhbCwgLy8gd2hhdCBvdXIgY2hpbGRyZW4gYmluZCB0b1xuXG5cdFx0XHRzaG93TG9naW46IHNob3dMb2dpbixcblx0XHRcdHNob3dSZWdpc3Rlcjogc2hvd1JlZ2lzdGVyLFxuXHRcdFx0c2hvd1Byb21wdDogc2hvd1Byb21wdCxcblx0XHRcdGNsb3NlOiBjbG9zZVxuXHRcdH07XG5cblx0XHQvLyBzZXQgdXAgb3VyIG1vZGFsIGZvciBsb2dpblxuXHRcdGZ1bmN0aW9uIHNob3dMb2dpbihjYWxsYmFjaykge1xuXHRcdFx0bW9kYWwubWVzc2FnZSA9IFwiTG9naW4gdG8gXCIgKyBzZXR0aW5ncy50aXRsZTtcblx0XHRcdG1vZGFsLmJ1dHRvbk9iajEgPSBudWxsO1xuXHRcdFx0bW9kYWwuYnV0dG9uT2JqMiA9IHtcblx0XHRcdFx0dGV4dDogXCJMb2dpblwiLFxuXHRcdFx0XHRjYWxsYmFjazogJHEud2hlbihjYWxsYmFjaylcblx0XHRcdH07XG5cdFx0XHRtb2RhbC5pc0xvZ2luID0gdHJ1ZTtcblx0XHR9XG5cblx0XHRmdW5jdGlvbiBzaG93UmVnaXN0ZXIoY2FsbGJhY2spIHtcblx0XHRcdG1vZGFsLm1lc3NhZ2UgPSBcIlJlZ2lzdGVyIGZvciBcIiArIHNldHRpbmdzLnRpdGxlO1xuXHRcdFx0bW9kYWwuYnV0dG9uT2JqMSA9IG51bGw7XG5cdFx0XHRtb2RhbC5idXR0b25PYmoyID0ge1xuXHRcdFx0XHR0ZXh0OiBcIlJlZ2lzdGVyXCIsXG5cdFx0XHRcdGNhbGxiYWNrOiAkcS53aGVuKGNhbGxiYWNrKVxuXHRcdFx0fTtcblx0XHRcdG1vZGFsLmlzUmVnaXN0ZXIgPSB0cnVlO1xuXHRcdH1cblxuXHRcdC8vIHNldCB1cCBvdXIgbW9kYWwgZm9yIHByb21wdFxuXHRcdGZ1bmN0aW9uIHNob3dQcm9tcHQobWVzc2FnZSwgYnV0dG9uT2JqMSwgYnV0dG9uT2JqMikge1xuXHRcdFx0Ly8gdmFsaWRhdGlvblxuXHRcdFx0dmFyIGVycm9yU3RyaW5nID0gXCJZb3UgZGlkbid0IHVzZSBtZSByaWdodFwiO1xuXG5cdFx0XHRpZiAoYnV0dG9uT2JqMSAmJiAodHlwZW9mIGJ1dHRvbk9iajEgPT09IFwidW5kZWZpbmVkXCIgPyBcInVuZGVmaW5lZFwiIDogX3R5cGVvZihidXR0b25PYmoxKSkgIT09ICdvYmplY3QnKSB0aHJvdyBuZXcgRXJyb3IoZXJyb3JTdHJpbmcpO1xuXG5cdFx0XHRpZiAoYnV0dG9uT2JqMiAmJiAodHlwZW9mIGJ1dHRvbk9iajIgPT09IFwidW5kZWZpbmVkXCIgPyBcInVuZGVmaW5lZFwiIDogX3R5cGVvZihidXR0b25PYmoyKSkgIT09ICdvYmplY3QnKSB0aHJvdyBuZXcgRXJyb3IoZXJyb3JTdHJpbmcpO1xuXG5cdFx0XHQvLyBzZXQgb3VyIG1vZGFsIG9iamVjdCBwcm9wZXJ0aWVzXG5cdFx0XHRtb2RhbC5tZXNzYWdlID0gbWVzc2FnZTtcblx0XHRcdG1vZGFsLmJ1dHRvbk9iajEgPSBidXR0b25PYmoxO1xuXHRcdFx0bW9kYWwuYnV0dG9uT2JqMiA9IGJ1dHRvbk9iajI7XG5cdFx0XHRtb2RhbC5pc1Byb21wdCA9IHRydWU7XG5cdFx0fVxuXG5cdFx0Ly8gc2V0IHRoZSBtb2RhbCBvYmplY3QgdG8gYSBwcmlzdGluZSBzdGF0ZSB3aXRob3V0IHJlYXNzaWdubWVudFxuXHRcdGZ1bmN0aW9uIGNsb3NlKCkge1xuXHRcdFx0ZGVsZXRlIG1vZGFsLmJ1dHRvbk9iajE7XG5cdFx0XHRkZWxldGUgbW9kYWwuYnV0dG9uT2JqMjtcblxuXHRcdFx0bW9kYWwuaXNMb2dpbiA9IGZhbHNlO1xuXHRcdFx0bW9kYWwuaXNSZWdpc3RlciA9IGZhbHNlO1xuXHRcdFx0bW9kYWwuaXNQcm9tcHQgPSBmYWxzZTtcblx0XHRcdG1vZGFsLm1lc3NhZ2UgPSBudWxsO1xuXHRcdH1cblx0fV0pO1xufSkod2luZG93LmFuZ3VsYXIpO1xuXCJ1c2Ugc3RyaWN0XCI7XG5cbihmdW5jdGlvbiAoYW5ndWxhcikge1xuXHRhbmd1bGFyLm1vZHVsZShcImFwcGxpY2F0aW9uXCIpLmZhY3RvcnkoXCJuYXZpZ2F0aW9uU2VydmljZVwiLCBbXCIkcm91dGVcIiwgZnVuY3Rpb24gKCRyb3V0ZSkge1xuXHRcdHZhciBhcHBsaWNhdGlvbkFuZ3VsYXJSb3V0ZXMgPSBfZmV0Y2hSb3V0ZXNQYWlycygpO1xuXG5cdFx0cmV0dXJuIHtcblx0XHRcdGFwcGxpY2F0aW9uQW5ndWxhclJvdXRlczogYXBwbGljYXRpb25Bbmd1bGFyUm91dGVzXG5cdFx0fTtcblxuXHRcdGZ1bmN0aW9uIF9mZXRjaFJvdXRlc1BhaXJzKCkge1xuXHRcdFx0Y29uc29sZS5sb2coXCJCdWlsZGluZyByb3V0ZXMgZnJvbSBzZXJ2aWNlIFxcXCJuYXZpZ2F0aW9uU2VydmljZVxcXCJcIik7XG5cblx0XHRcdHZhciByZXR1cm5BcnJheU9mVXJsTmFtZVBhaXJzID0gW107XG5cblx0XHRcdGFuZ3VsYXIuZm9yRWFjaCgkcm91dGUucm91dGVzLCBmdW5jdGlvbiAocikge1xuXHRcdFx0XHQvLyB3ZSBkb24ndCB3YW50IHJlZGlyZWN0IHJvdXRlcyBPUlxuXHRcdFx0XHQvLyByb3V0ZXMgd2l0aG91dCBkaXJlY3QgY29udHJvbGxlcnNcblx0XHRcdFx0Ly8gKHRoZXNlIGFyZSBjb21wb25lbnRzKVxuXG5cdFx0XHRcdGlmICghIXIucmVkaXJlY3RUbyB8fCAhci5jb250cm9sbGVyKSB7XG5cdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0dmFyIHJvdXRlVXJsTmFtZVBhaXIgPSB7XG5cdFx0XHRcdFx0dXJsOiByLm9yaWdpbmFsUGF0aCB8fCAnLycsIC8vIG91ciB1cmwgd2lsbCBiZSB3aGF0IEFuZ3VsYXIgdHJhY2tzIGFzIFwib3JpZ2luYWxQYXRoXCJcblx0XHRcdFx0XHRuYW1lOiByLmNvbnRyb2xsZXIucmVwbGFjZSgvY29udHJvbGxlci9naSwgXCJcIikgLy8gdXNlIEphdmFTY3JpcHQgcmVwbGFjZSgpIHRvIHRyaW0gY29udHJvbGxlciBwYXRoIHRvXG5cdFx0XHRcdFx0Ly8ganVzdCB0aGUgbmFtZVxuXHRcdFx0XHR9O1xuXG5cdFx0XHRcdHJldHVybkFycmF5T2ZVcmxOYW1lUGFpcnMucHVzaChyb3V0ZVVybE5hbWVQYWlyKTtcblx0XHRcdH0pO1xuXG5cdFx0XHRyZXR1cm4gX2FycmFuZ2VSb3V0ZUVsZW1lbnRUb0ZpcnN0KFwid2VsY29tZVwiLCByZXR1cm5BcnJheU9mVXJsTmFtZVBhaXJzKTtcblx0XHR9XG5cblx0XHRmdW5jdGlvbiBfYXJyYW5nZVJvdXRlRWxlbWVudFRvRmlyc3Qocm91dGVOYW1lLCBhcnJheSkge1xuXHRcdFx0Y29uc29sZS5sb2coXCJBcnJhbmdpbmcgXFxcIlwiICsgcm91dGVOYW1lICsgXCJcXFwiIHRvIGJlZ2lubmluZyBvZiByb3V0ZXMgbGlzdFwiKTtcblxuXHRcdFx0YXJyYXkuZm9yRWFjaChmdW5jdGlvbiAoZWxlbWVudEluQXJyYXksIGluZGV4T2ZFbGVtZW50KSB7XG5cdFx0XHRcdGlmIChlbGVtZW50SW5BcnJheS5uYW1lICYmIGVsZW1lbnRJbkFycmF5Lm5hbWUudG9Mb3dlckNhc2UoKSA9PT0gcm91dGVOYW1lLnRvTG93ZXJDYXNlKCkpIHtcblx0XHRcdFx0XHRhcnJheS5zcGxpY2UoaW5kZXhPZkVsZW1lbnQsIDEpO1xuXHRcdFx0XHRcdGFycmF5LnNwbGljZSgwLCAwLCBlbGVtZW50SW5BcnJheSk7XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXG5cdFx0XHRyZXR1cm4gYXJyYXk7XG5cdFx0fVxuXHR9XSk7XG59KSh3aW5kb3cuYW5ndWxhcik7XG5cInVzZSBzdHJpY3RcIjtcblxuKGZ1bmN0aW9uIChhbmd1bGFyKSB7XG5cdGFuZ3VsYXIubW9kdWxlKFwiYXBwbGljYXRpb25cIikuZmFjdG9yeShcInJvb21zU2VydmljZVwiLCBbXCIkcVwiLCBcIiRodHRwXCIsIGZ1bmN0aW9uICgkcSwgJGh0dHApIHtcblx0XHQvLyBsZXQncyBpbml0IHRoZSByb29tcyBvbmx5IHdoZW4gdGhpcyBzZXJ2aWNlIGlzIGNvbnN0cnVjdGVkLi4uIGFuZCBuZXZlciBhZ2Fpbi4uLlxuXHRcdC8vIG1heSBub3QgYmUgdGhlIGJlc3QgaWRlYSBidXQgSSBkb24ndCBzZWUgcm9vbXMgY2hhbmdpbmcgYWxsIHRoYXQgb2Z0ZW4gaW4gdGhpc1xuXHRcdC8vIGZhY2lsaXR5OyBsb2dpblNlcnZpY2UgaXMgdGhlbiB0YXNrZWQgd2l0aCBpbml0aWFsaXppbmcgdGhpcyBzZXJ2aWNlIGJlY2F1c2Vcblx0XHQvLyBvbmx5IGxvZ2dlZCBpbiB1c2VycyBtYXkgdmlldyByb29tc1xuXG5cdFx0dmFyIF9yb29tc0Zyb21GaXJlYmFzZSA9IG51bGw7XG5cblx0XHRyZXR1cm4ge1xuXHRcdFx0aW5pdGlhbGl6ZVJvb21zRnJvbUZpcmViYXNlOiBpbml0aWFsaXplUm9vbXNGcm9tRmlyZWJhc2UsXG5cdFx0XHRyZXR1cm5GZXRjaGVkUm9vbXM6IHJldHVybkZldGNoZWRSb29tc1xuXHRcdH07XG5cblx0XHRmdW5jdGlvbiBpbml0aWFsaXplUm9vbXNGcm9tRmlyZWJhc2UoKSB7XG5cdFx0XHRfcm9vbXNGcm9tRmlyZWJhc2UgPSBudWxsO1xuXG5cdFx0XHQvLyB0d28gd2F5cyB0byBnZXQgdGhlIGRhdGEuLi4gdmlhIHJlc3QgZW5kcG9pbnQgdXNpbmcgJGh0dHAgb3IgRmlyZWJhc2UgcmVmIHdyYXBwZWQgaW4gJHFcblx0XHRcdC8vIHRoaXMgaGFzIG5vIHRva2VuLCBzbyBzZWN1cml0eSBoYXMgdG8gYmUgbGF4IG9uIHRoZSBiYWNrLWVuZCBpbiBvcmRlciB0byBnZXQgYSAyMDAgcmVzcG9uc2Vcblx0XHRcdC8vXHRcdHJldHVybiAkaHR0cCh7XG5cdFx0XHQvL1x0XHRcdHVybCAgICA6IFwiaHR0cHM6Ly9jb25mZGVjb25mbGljdG9yLmZpcmViYXNlaW8uY29tL3Jvb21zLmpzb25cIixcblx0XHRcdC8vXHRcdFx0bWV0aG9kIDogXCJHRVRcIlxuXHRcdFx0Ly9cdFx0fSlcblx0XHRcdC8vIHRoaXMgbWV0aG9kLCB0aG91Z2gsIGF0dGFjaGVzIGF1dGhlbnRpY2F0aW9uIHRvIHRoZSByZXF1ZXN0IHNvIGlmIEkgbG9jayB0aGUgcmVzb3VyY2Vcblx0XHRcdC8vIGRvd24gdG8gYXV0aGVudGljYXRlZCB1c2VycywgdGhpcyB3aWxsIHJldHVybiByZXN1bHRzIG9uY2UgYSB1c2VyIGRvZXMgYXV0aGVudGljYXRlXG5cdFx0XHRyZXR1cm4gJHEud2hlbihmaXJlYmFzZS5kYXRhYmFzZSgpLnJlZihcIi9yb29tcy9cIikub25jZShcInZhbHVlXCIpKS50aGVuKGZ1bmN0aW9uIChyb29tcykge1xuXHRcdFx0XHRpZiAocm9vbXMudmFsKSByb29tcyA9IHJvb21zLnZhbCgpOyAvLyB1c2luZyBGaXJlYmFzZSBhYm92ZVxuXHRcdFx0XHRlbHNlIHJvb21zID0gcm9vbXMuZGF0YTsgLy8gdXNpbmcgJGh0dHAgYWJvdmVcblxuXHRcdFx0XHRjb25zb2xlLmxvZyhyb29tcy5sZW5ndGggKyBcIiByb29tcyBmZXRjaGVkIGZyb20gRmlyZWJhc2UgZGF0YWJhc2VcIik7XG5cblx0XHRcdFx0X3Jvb21zRnJvbUZpcmViYXNlID0gcm9vbXM7XG5cdFx0XHR9KTtcblx0XHR9XG5cblx0XHRmdW5jdGlvbiByZXR1cm5GZXRjaGVkUm9vbXMoKSB7XG5cdFx0XHRyZXR1cm4gX3Jvb21zRnJvbUZpcmViYXNlO1xuXHRcdH1cblx0fV0pO1xufSkod2luZG93LmFuZ3VsYXIpO1xuXCJ1c2Ugc3RyaWN0XCI7XG5cbihmdW5jdGlvbiAoYW5ndWxhcikge1xuXHRhbmd1bGFyLm1vZHVsZShcImFwcGxpY2F0aW9uXCIpLmZhY3RvcnkoXCJyZWdpc3RlclNlcnZpY2VcIiwgW1wiJGh0dHBcIiwgXCJzZXR0aW5nc1wiLCBcImxvZ2luU2VydmljZVwiLCBmdW5jdGlvbiAoJGh0dHAsIHNldHRpbmdzLCBsb2dpblNlcnZpY2UpIHtcblx0XHRyZXR1cm4ge1xuXHRcdFx0cmVnaXN0ZXI6IHJlZ2lzdGVyXG5cdFx0fTtcblxuXHRcdGZ1bmN0aW9uIHJlZ2lzdGVyKGRhdGEsIHBhc3N3b3JkKSB7XG5cdFx0XHQvLyBwYXNzIGluIGRhdGEgYW5kIHBhc3N3b3JkIHNlcGFyYXRlbHkgc28gSSBkb24ndCBoYXZlIHRvIHNhbml0aXplIHRoZSBkYXRhXG5cdFx0XHQvLyBlbnRpdHkgYmVmb3JlIHdyaXRlIHRvIEZpcmViYXNlLi4uIG90aGVyd2lzZSwgcGFzc3dvcmQgd291bGQgYmUgaW5jbHVkZWRcblx0XHRcdC8vIGluIG91ciBmb3JtIGRhdGEgYW5kIHRoYXQgd291bGQgYmUgYSBjb25jZXJuIGlmIGl0IGdvdCB3cml0dGVuIHRvIGRhdGFiYXNlLFxuXHRcdFx0Ly8gcGxhaW4gdGV4dC4uLiB0cmVhdCBjb2xsZWN0ZWQgZGF0YSB3aXRoIHJlc3BlY3QhICA6LSlcblx0XHRcdGNvbnNvbGUubG9nKFwiUmVnaXN0ZXIgdXNlciBlbnRpdHk6IFwiLCBkYXRhKTtcblxuXHRcdFx0Ly8gcmV0dXJuIGEgRmlyZWJhc2UgcHJvbWlzZTsgdGhpcyB1cGRhdGVzIG91ciBhdXRoZW50aWNhdGlvbiB0aGVuIHN1YnNlcXVlbnRseVxuXHRcdFx0Ly8gd3JpdGVzIG91ciBmdWxsIGZvcm0gZGF0YSB0byBGaXJlYmFzZSBhbmQgcmV0dXJucyB0aGUgZGF0YSBwcm9wZXJ0eSB0aGF0XG5cdFx0XHQvLyAkaHR0cCBmdWxmaWxscyB3aXRoXG5cdFx0XHRyZXR1cm4gY3JlYXRlRmlyZWJhc2VBdXRoZW50aWNhdGlvbihkYXRhLCBwYXNzd29yZCkudGhlbih3cml0ZUZvcm1EYXRhVG9GaXJlYmFzZSkudGhlbihyZXR1cm5EYXRhRnJvbVJlc3VsdHMpO1xuXHRcdH1cblxuXHRcdGZ1bmN0aW9uIGNyZWF0ZUZpcmViYXNlQXV0aGVudGljYXRpb24oZGF0YSwgcGFzc3dvcmQpIHtcblx0XHRcdHJldHVybiBmaXJlYmFzZS5hdXRoKCkuY3JlYXRlVXNlcldpdGhFbWFpbEFuZFBhc3N3b3JkKGRhdGEuZW1haWwsIHBhc3N3b3JkKS50aGVuKGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0Ly8gbW92ZSBkYXRhIGFsb25nIHRoZSBwcm9taXNlIGNoYWluIGJ5IHJldHVybmluZyBpdCBvbmNlIHRoaXMgcHJvbWlzZSBmdWxmaWxsc1xuXHRcdFx0XHRyZXR1cm4gZGF0YTtcblx0XHRcdH0pO1xuXHRcdH1cblxuXHRcdGZ1bmN0aW9uIHdyaXRlRm9ybURhdGFUb0ZpcmViYXNlKGRhdGEpIHtcblx0XHRcdHJldHVybiAkaHR0cCh7XG5cdFx0XHRcdHVybDogc2V0dGluZ3MuZmV0Y2hSZXN0VXJsKFwidXNlcnMvXCIgKyBkYXRhLmVtYWlsLnJlcGxhY2UoXCIuXCIsIFwiX1wiKS50b0xvd2VyQ2FzZSgpKSxcblx0XHRcdFx0bWV0aG9kOiBcIlBVVFwiLFxuXHRcdFx0XHRkYXRhOiBkYXRhXG5cdFx0XHR9KTtcblx0XHR9XG5cblx0XHRmdW5jdGlvbiByZXR1cm5EYXRhRnJvbVJlc3VsdHMocmVzdWx0cykge1xuXHRcdFx0bG9naW5TZXJ2aWNlLnVwZGF0ZUxvZ2luU3RhdHVzKHJlc3VsdHMuZGF0YSk7XG5cdFx0XHRyZXR1cm4gcmVzdWx0cy5kYXRhO1xuXHRcdH1cblx0fV0pO1xufSkod2luZG93LmFuZ3VsYXIpO1xuXCJ1c2Ugc3RyaWN0XCI7XG5cbihmdW5jdGlvbiAoYW5ndWxhcikge1xuXHRhbmd1bGFyLm1vZHVsZShcImFwcGxpY2F0aW9uXCIpLmNvbnRyb2xsZXIoXCJleGVyY2lzZTFDb250cm9sbGVyXCIsIGZ1bmN0aW9uIChtb2RhbFNlcnZpY2UpIHtcblx0XHQvLyBjYXB0dXJpbmcgY29udHJvbGxlciBzY29wZSBoZXJlLCB1c2VkIGFnYWluIGluIF9nZXRSYW5kb21Db2xvclxuXHRcdHZhciB2bSA9IHRoaXM7XG5cblx0XHQvLyBjcmVhdGluZyBjYWxsYmFjayBmdW5jdGlvbiBzaG93QWxlcnRDYWxsYmFjayBiZWxvdywgSSdtIHVzaW5nIGJpbmQgdG8gc2V0IFwidGhpc1wiIGluIHRoZSBmdW5jdGlvbiB0b1xuXHRcdC8vIHRoaXMgY29udHJvbGxlciBzbyBJIGNhbiBhY2Nlc3MgYm91bmQgcHJvcGVydGllcyBsaWtlIHJvbGxCdXR0b25UZXh0XG5cblx0XHQvLyBJIGdldCBteSBob21lbWFkZSBtb2RhbCB0byBzaG93IGJ5IGludm9raW5nIG91ciBzZXJ2aWNlIGZ1bmN0aW9uLCB3aGljaCB5b3Ugd3JhcCBpbiBhIGZ1bmN0aW9uIHNvIHlvdVxuXHRcdC8vIG1heSBiaW5kIHRvIGFuIGV2ZW50IGxpa2UgbmctY2xpY2tcblx0XHR0aGlzLnNob3dQcm9tcHQgPSBmdW5jdGlvbiAoKSB7XG5cdFx0XHRtb2RhbFNlcnZpY2Uuc2hvd1Byb21wdChcIlRoaXMgaXMgb3VyIGZpcnN0IHRlc3RcIiwge1xuXHRcdFx0XHR0ZXh0OiBcIlNob3cgQWxlcnRcIixcblx0XHRcdFx0Y2FsbGJhY2s6IHNob3dBbGVydENhbGxiYWNrLmJpbmQodGhpcylcblx0XHRcdH0sIHtcblx0XHRcdFx0dGV4dDogXCJCZSBRdWlldFwiXG5cdFx0XHR9KTtcblx0XHR9O1xuXG5cdFx0Ly9UT0RPOlxuXHRcdChmdW5jdGlvbiB5ZXMobm8pIHtcblx0XHRcdGFsZXJ0KG5vKTtcblx0XHR9KSgneWVzJyk7XG5cblx0XHQvLyBtb2RhbCBjYWxsYmFja1xuXHRcdGZ1bmN0aW9uIHNob3dBbGVydENhbGxiYWNrKCkge1xuXHRcdFx0dGhpcy5yb2xsQnV0dG9uVGV4dCA9IFwiSSBjaGFuZ2VkIGJlY2F1c2UgeW91IHByZXNzZWQgYWxlcnRcIjtcblx0XHRcdGFsZXJ0KFwiU2hvd2luZyBhbGVydCFcIik7XG5cdFx0fVxuXG5cdFx0Ly8gYmluZGFibGUgcHVibGljc1xuXHRcdHRoaXMudGl0bGUgPSBcImV4ZXJjaXNlIHRpdGxlXCI7XG5cblx0XHR0aGlzLnJvbGxCdXR0b25UZXh0ID0gXCJSb2xsIE1lXCI7XG5cblx0XHR0aGlzLmxhc3RPYmplY3RDbGlja2VkVGV4dCA9IG51bGw7XG5cblx0XHR0aGlzLnBvc3NpYmxlQ29sb3JzID0gW3tcblx0XHRcdG5hbWU6IFwiQnJvd25cIixcblx0XHRcdGhleDogXCIjQTUyQTJBXCJcblx0XHR9LCB7XG5cdFx0XHRuYW1lOiBcIkJsdWVcIixcblx0XHRcdGhleDogXCIjMDAwMEZGXCJcblx0XHR9LCB7XG5cdFx0XHRuYW1lOiBcIkdhaW5zYm9yb1wiLFxuXHRcdFx0aGV4OiBcIiNEQ0RDRENcIlxuXHRcdH1dO1xuXG5cdFx0dGhpcy5jb250cm9sbGVySW5pdGlhbGl6ZWRPYmplY3QgPSB7XG5cdFx0XHRuYW1lOiBcIk9iamVjdCAxXCIsXG5cdFx0XHRjbGlja0NvdW50OiAwLFxuXHRcdFx0Y29sb3I6IF9nZXRSYW5kb21Db2xvcigpXG5cdFx0fTtcblxuXHRcdHRoaXMub2JqZWN0QXJyYXkgPSBbdGhpcy5jb250cm9sbGVySW5pdGlhbGl6ZWRPYmplY3RdO1xuXG5cdFx0dGhpcy5yb2xsTWV0aG9kID0gZnVuY3Rpb24gKCkge1xuXHRcdFx0dGhpcy5yb2xsQnV0dG9uVGV4dCA9IFwiSSdtIFJvbGxlZFwiO1xuXHRcdH07XG5cblx0XHR0aGlzLmFkZE5ld09iamVjdCA9IGZ1bmN0aW9uICgpIHtcblx0XHRcdHZhciBuZXdPYmplY3QgPSB7XG5cdFx0XHRcdG5hbWU6IFwiT2JqZWN0IFwiICsgKHRoaXMub2JqZWN0QXJyYXkubGVuZ3RoICsgMSksXG5cdFx0XHRcdGNsaWNrQ291bnQ6IDAsXG5cdFx0XHRcdGNvbG9yOiBfZ2V0UmFuZG9tQ29sb3IoKVxuXHRcdFx0fTtcblxuXHRcdFx0dGhpcy5vYmplY3RBcnJheS5wdXNoKG5ld09iamVjdCk7XG5cdFx0fTtcblxuXHRcdHRoaXMub2JqZWN0Q2xpY2tlZCA9IGZ1bmN0aW9uIChvYmopIHtcblx0XHRcdG9iai5jbGlja0NvdW50Kys7XG5cdFx0XHR0aGlzLmxhc3RPYmplY3RDbGlja2VkVGV4dCA9IG9iai5uYW1lICsgXCIgY2xpY2tlZCBcIiArIG9iai5jbGlja0NvdW50ICsgXCIgdGltZXNcIjtcblx0XHRcdGNvbnNvbGUubG9nKHRoaXMubGFzdE9iamVjdENsaWNrZWRUZXh0KTtcblx0XHR9O1xuXG5cdFx0dGhpcy5jbGVhckNvbG9yRmlsdGVyID0gZnVuY3Rpb24gKCkge1xuXHRcdFx0aWYgKHRoaXMuZmlsdGVyLmNvbG9yID09PSBudWxsKSB7XG5cdFx0XHRcdC8vIGRlbGV0ZSBjb2xvciBmcm9tIGZpbHRlciBvYmplY3QsIG90aGVyd2lzZSB0aGUgZmlsdGVyIHdpbGwgdGVzdCBmb3IgZWxlbWVudHMgaW4gYW4gYXJyYXlcblx0XHRcdFx0Ly8gd2l0aCBjb2xvciBzZXQgdG8gbnVsbC4uLlxuXG5cdFx0XHRcdC8vIHNldHRpbmcgdGhpcy5maWx0ZXIuY29sb3IgZXF1YWwgdG8gbnVsbCBpcyBub3QgZXF1aXZhbGVudCB0byBkZWxldGUodGhpcy5maWx0ZXIuY29sb3IpXG5cdFx0XHRcdC8vIGFzIGZhciBhcyBBbmd1bGFyIGZpbHRlcmluZyBnb2VzXG5cblx0XHRcdFx0Ly8gcGxlYXNlIHNlZSBodHRwOi8vYWRyaXBvZmphdmFzY3JpcHQuY29tL2Jsb2cvZHJpcHMvdGhlLWRlbGV0ZS1vcGVyYXRvci1pbi1qYXZhc2NyaXB0Lmh0bWxcblx0XHRcdFx0ZGVsZXRlIHRoaXMuZmlsdGVyLmNvbG9yO1xuXHRcdFx0fVxuXHRcdH07XG5cblx0XHQvLyBob2lzdGVkLCBwcml2YXRlIGZ1bmN0aW9uXG5cdFx0ZnVuY3Rpb24gX2dldFJhbmRvbUNvbG9yKCkge1xuXHRcdFx0dmFyIHJhbmRvbUNvbG9yID0gdm0ucG9zc2libGVDb2xvcnNbTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogdm0ucG9zc2libGVDb2xvcnMubGVuZ3RoKV07XG5cblx0XHRcdC8vIHJhbmRvbUNvbG9yIGlzIGFjdHVhbGx5IGFuIG9iamVjdCwgd2UgcmV0dXJuIG9ubHkgdGhlIGhleCBwcm9wZXJ0eSB3ZSBuZWVkXG5cdFx0XHRyZXR1cm4gcmFuZG9tQ29sb3IuaGV4O1xuXHRcdH1cblx0fSk7XG59KSh3aW5kb3cuYW5ndWxhcik7XG5cInVzZSBzdHJpY3RcIjtcblxuKGZ1bmN0aW9uIChhbmd1bGFyKSB7XG5cdGFuZ3VsYXIubW9kdWxlKFwiYXBwbGljYXRpb25cIikuY29udHJvbGxlcihcImV4ZXJjaXNlMkNvbnRyb2xsZXJcIiwgZnVuY3Rpb24gKCkge1xuXHRcdHRoaXMuc3VibWl0ID0gZnVuY3Rpb24gKCkge1xuXHRcdFx0YWxlcnQoXCJGb3JtIHN1Ym1pdHRlZFwiKTtcblx0XHR9O1xuXHR9KTtcbn0pKHdpbmRvdy5hbmd1bGFyKTtcblwidXNlIHN0cmljdFwiO1xuXG4oZnVuY3Rpb24gKGFuZ3VsYXIpIHtcblx0YW5ndWxhci5tb2R1bGUoXCJhcHBsaWNhdGlvblwiKS5jb250cm9sbGVyKFwid2VsY29tZUNvbnRyb2xsZXJcIiwgZnVuY3Rpb24gKCkge30pO1xufSkod2luZG93LmFuZ3VsYXIpO1xuXCJ1c2Ugc3RyaWN0XCI7XG5cbihmdW5jdGlvbiAoYW5ndWxhcikge1xuXHRhbmd1bGFyLm1vZHVsZShcImFwcGxpY2F0aW9uXCIpLmNvbnRyb2xsZXIoXCJtb2RhbENvbnRyb2xsZXJcIiwgW1wibW9kYWxTZXJ2aWNlXCIsIGZ1bmN0aW9uIChtb2RhbFNlcnZpY2UpIHtcblx0XHR0aGlzLiRvbkluaXQgPSBmdW5jdGlvbiAoKSB7XG5cdFx0XHQvLyBmdW5jdGlvbiByZWZlcmVuY2UgdG8gY2xvc2luZyB0aGUgbW9kYWxcblx0XHRcdHRoaXMuY2xvc2UgPSBtb2RhbFNlcnZpY2UuY2xvc2U7XG5cblx0XHRcdC8vIGJpbmQgdG8gb3VyIG1vZGFsIGNvbmZpZ3VyYXRpb24gaW4gbW9kYWxTZXJ2aWNlXG5cdFx0XHR0aGlzLm1vZGFsID0gbW9kYWxTZXJ2aWNlLm1vZGFsO1xuXG5cdFx0XHQvLyBhIGNvbWJpbmF0aW9uIG9mIHByb3BlcnRpZXMgdG8gZGV0ZXJtaW5lIHdoZXRoZXIgb3Igbm90IHdlIHNob3VsZCBiZSBzaG93aW5nXG5cdFx0XHQvLyB0aGUgbW9kYWw7IHdyYXAgaW4gYSBmdW5jdGlvbiBzbyB5b3VyIGJpbmRpbmcgcmUtZXZhbHVhdGVzIHdoZW4gQW5ndWxhcidzIGJpbmRpbmdzXG5cdFx0XHQvLyByZWZyZXNoIHRoZW1zZWx2ZXM7IGFzc2lnbmluZyB0byBhIGxpdGVyYWwgd2lsbCBhbHdheXMgYmUgdGhlIHNhbWUgYW5kIHdvbid0XG5cdFx0XHQvLyByZS1ldmFsdWF0ZVxuXHRcdFx0dGhpcy5pc1Nob3dpbmdNb2RhbCA9IGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0cmV0dXJuIG1vZGFsU2VydmljZS5tb2RhbC5pc0xvZ2luIHx8IG1vZGFsU2VydmljZS5tb2RhbC5pc1JlZ2lzdGVyIHx8IG1vZGFsU2VydmljZS5tb2RhbC5pc1Byb21wdDtcblx0XHRcdH07XG5cdFx0fTtcblx0fV0pO1xufSkod2luZG93LmFuZ3VsYXIpO1xuXCJ1c2Ugc3RyaWN0XCI7XG5cbihmdW5jdGlvbiAoYW5ndWxhcikge1xuXHRhbmd1bGFyLm1vZHVsZShcImFwcGxpY2F0aW9uXCIpLmNvbXBvbmVudChcImhvbWVtYWRlTW9kYWxcIiwge1xuXHRcdHRlbXBsYXRlVXJsOiBcInd3dy9hcHAvY29tcG9uZW50cy9ob21lbWFkZU1vZGFsL21vZGFsLmh0bVwiLFxuXHRcdGNvbnRyb2xsZXI6IFwibW9kYWxDb250cm9sbGVyXCIsXG5cdFx0Y29udHJvbGxlckFzOiBcInZtXCIsXG5cdFx0dHJhbnNjbHVkZTogdHJ1ZVxuXHR9KTtcbn0pKHdpbmRvdy5hbmd1bGFyKTtcblwidXNlIHN0cmljdFwiO1xuXG4oZnVuY3Rpb24gKGFuZ3VsYXIpIHtcblx0YW5ndWxhci5tb2R1bGUoXCJhcHBsaWNhdGlvblwiKS5jb250cm9sbGVyKFwibmF2aWdhdGlvbkNvbnRyb2xsZXJcIiwgW1wibmF2aWdhdGlvblNlcnZpY2VcIiwgZnVuY3Rpb24gKG5hdmlnYXRpb24pIHtcblx0XHR0aGlzLm5hdmlnYXRpb24gPSBuYXZpZ2F0aW9uLmFwcGxpY2F0aW9uQW5ndWxhclJvdXRlcztcblx0fV0pO1xufSkod2luZG93LmFuZ3VsYXIpO1xuXCJ1c2Ugc3RyaWN0XCI7XG5cbi8vIHdyYXAgYWxsIG91ciBwaWVjZXMgdG9nZXRoZXIgYW5kIHRlbGwgQW5ndWxhciBtb2R1bGUgd2UncmUgdXNpbmdcbi8vIGFib3V0IHRoZW1cblxuKGZ1bmN0aW9uIChhbmd1bGFyKSB7XG5cdGFuZ3VsYXIubW9kdWxlKFwiYXBwbGljYXRpb25cIikuY29tcG9uZW50KFwibmF2aWdhdGlvblwiLCB7XG5cdFx0dGVtcGxhdGVVcmw6IFwid3d3L2FwcC9jb21wb25lbnRzL25hdmlnYXRpb24vbmF2aWdhdGlvbi5odG1cIixcblx0XHRjb250cm9sbGVyOiBcIm5hdmlnYXRpb25Db250cm9sbGVyXCIsXG5cdFx0Y29udHJvbGxlckFzOiBcInZtXCJcblx0fSk7XG59KSh3aW5kb3cuYW5ndWxhcik7XG5cInVzZSBzdHJpY3RcIjtcblxuKGZ1bmN0aW9uIChhbmd1bGFyKSB7XG5cdGFuZ3VsYXIubW9kdWxlKFwiYXBwbGljYXRpb25cIikuY29udHJvbGxlcihcInJvb21Db250cm9sbGVyXCIsIFtcIiRyb3V0ZVBhcmFtc1wiLCBcIiRodHRwXCIsIGZ1bmN0aW9uICgkcm91dGVQYXJhbXMsICRodHRwKSB7XG5cdFx0dGhpcy4kb25Jbml0ID0gZnVuY3Rpb24gKCkge1xuXHRcdFx0dGhpcy5wYXJhbWV0ZXJzID0gJHJvdXRlUGFyYW1zO1xuXHRcdFx0dGhpcy5yb29tSWQgPSAkcm91dGVQYXJhbXMuaWQ7XG5cdFx0fTtcblx0fV0pO1xufSkod2luZG93LmFuZ3VsYXIpO1xuXCJ1c2Ugc3RyaWN0XCI7XG5cbihmdW5jdGlvbiAoYW5ndWxhcikge1xuXHRhbmd1bGFyLm1vZHVsZShcImFwcGxpY2F0aW9uXCIpLmNvbXBvbmVudChcInJvb21cIiwge1xuXHRcdHRlbXBsYXRlVXJsOiBcInd3dy9hcHAvY29tcG9uZW50cy9yb29tL3Jvb20uaHRtXCIsXG5cdFx0Y29udHJvbGxlcjogXCJyb29tQ29udHJvbGxlclwiLFxuXHRcdGNvbnRyb2xsZXJBczogXCJ2bVwiXG5cdH0pO1xufSkod2luZG93LmFuZ3VsYXIpO1xuXCJ1c2Ugc3RyaWN0XCI7XG5cbihmdW5jdGlvbiAoYW5ndWxhcikge1xuXHRhbmd1bGFyLm1vZHVsZShcImFwcGxpY2F0aW9uXCIpLmNvbnRyb2xsZXIoXCJyb29tc0NvbnRyb2xsZXJcIiwgW1wicm9vbXNTZXJ2aWNlXCIsIGZ1bmN0aW9uIChyb29tc1NlcnZpY2UpIHtcblx0XHR0aGlzLiRvbkluaXQgPSBmdW5jdGlvbiAoKSB7XG5cdFx0XHR0aGlzLnJldHVybkZldGNoZWRSb29tcyA9IHJvb21zU2VydmljZS5yZXR1cm5GZXRjaGVkUm9vbXM7XG5cdFx0fTtcblx0fV0pO1xufSkod2luZG93LmFuZ3VsYXIpO1xuXCJ1c2Ugc3RyaWN0XCI7XG5cbihmdW5jdGlvbiAoYW5ndWxhcikge1xuXHRhbmd1bGFyLm1vZHVsZShcImFwcGxpY2F0aW9uXCIpLmNvbXBvbmVudChcInJvb21zXCIsIHtcblx0XHR0ZW1wbGF0ZVVybDogXCJ3d3cvYXBwL2NvbXBvbmVudHMvcm9vbXMvcm9vbXMuaHRtXCIsXG5cdFx0Y29udHJvbGxlcjogXCJyb29tc0NvbnRyb2xsZXJcIixcblx0XHRjb250cm9sbGVyQXM6IFwidm1cIixcblx0XHR0cmFuc2NsdWRlOiB0cnVlXG5cdH0pO1xufSkod2luZG93LmFuZ3VsYXIpO1xuXCJ1c2Ugc3RyaWN0XCI7XG5cbihmdW5jdGlvbiAoYW5ndWxhcikge1xuXHRhbmd1bGFyLm1vZHVsZShcImFwcGxpY2F0aW9uXCIpLmNvbnRyb2xsZXIoXCJsb2dnZWRJblVzZXJDb250cm9sbGVyXCIsIFtcInNldHRpbmdzXCIsIFwibW9kYWxTZXJ2aWNlXCIsIFwibG9naW5TZXJ2aWNlXCIsIGZ1bmN0aW9uIChzZXR0aW5ncywgbW9kYWxTZXJ2aWNlLCBsb2dpblNlcnZpY2UpIHtcblxuXHRcdHRoaXMuJG9uSW5pdCA9IGZ1bmN0aW9uICgpIHtcblx0XHRcdHRoaXMuYXBwbGljYXRpb25MYWJlbCA9IHNldHRpbmdzLnRpdGxlICsgXCIgdi5cIiArIHNldHRpbmdzLnZlcnNpb247XG5cblx0XHRcdC8vIGxvZ2luIHNlcnZpY2UgYmluZGluZ3Ncblx0XHRcdHRoaXMuZmV0Y2hMb2dnZWRJblVzZXIgPSBsb2dpblNlcnZpY2UuZmV0Y2hMb2dnZWRJblVzZXI7XG5cdFx0XHR0aGlzLmZldGNoSXNMb2dpbkJ1c3kgPSBsb2dpblNlcnZpY2UuZmV0Y2hJc0xvZ2luQnVzeTtcblx0XHRcdHRoaXMubG9nb3V0ID0gbG9naW5TZXJ2aWNlLmxvZ291dDtcblxuXHRcdFx0Ly8gbW9kYWwgc2VydmljZSBiaW5kaW5nc1xuXHRcdFx0dGhpcy5zaG93TG9naW4gPSBtb2RhbFNlcnZpY2Uuc2hvd0xvZ2luO1xuXHRcdFx0dGhpcy5zaG93UmVnaXN0ZXIgPSBtb2RhbFNlcnZpY2Uuc2hvd1JlZ2lzdGVyO1xuXG5cdFx0XHQvLyBhIGN1c3RvbSBmdW5jdGlvbiB3ZSdsbCBtYWtlIHJpZ2h0IGhlcmUgc28gd2UgY2FuIGJpbmRcblx0XHRcdC8vIGEgcHJvbXB0aW5nIHRvIHRoZSBsb2dvdXQgYnV0dG9uIHNvIHRoZSB1c2VyIG1heSBjbGlja1xuXHRcdFx0Ly8gaXQgYW5kIGFuc3dlciBhIHF1ZXN0aW9uIGJlZm9yZSBsb3NpbmcgdGhlaXIgc2Vzc2lvblxuXHRcdFx0dGhpcy5sb2dvdXRQcm9tcHQgPSBmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdG1vZGFsU2VydmljZS5zaG93UHJvbXB0KFwiQXJlIHlvdSBzdXJlIHlvdSB3YW50IHRvIGxvZyBvdXQ/XCIsIHsgdGV4dDogXCJOTywgUExFQVNFIERPTidUXCIgfSwgeyB0ZXh0OiBcIkRPIElUISAgRE8gSVQhXCIsIGNhbGxiYWNrOiB0aGlzLmxvZ291dCB9KTtcblx0XHRcdH07XG5cdFx0fTtcblx0fV0pO1xufSkod2luZG93LmFuZ3VsYXIpO1xuXCJ1c2Ugc3RyaWN0XCI7XG5cbihmdW5jdGlvbiAoYW5ndWxhcikge1xuXHRhbmd1bGFyLm1vZHVsZShcImFwcGxpY2F0aW9uXCIpLmNvbXBvbmVudChcImxvZ2dlZEluVXNlclwiLCB7XG5cdFx0dGVtcGxhdGVVcmw6IFwid3d3L2FwcC9jb21wb25lbnRzL2xvZ2dlZEluVXNlci9sb2dnZWRJblVzZXIuaHRtXCIsXG5cdFx0Y29udHJvbGxlcjogXCJsb2dnZWRJblVzZXJDb250cm9sbGVyXCIsXG5cdFx0Y29udHJvbGxlckFzOiBcInZtXCJcblx0fSk7XG59KSh3aW5kb3cuYW5ndWxhcik7XG5cInVzZSBzdHJpY3RcIjtcblxuKGZ1bmN0aW9uIChhbmd1bGFyKSB7XG5cdGFuZ3VsYXIubW9kdWxlKFwiYXBwbGljYXRpb25cIikuY29udHJvbGxlcihcIm1vZGFsTG9naW5Db250cm9sbGVyXCIsIFtcIiRzY29wZVwiLCBcImxvZ2luU2VydmljZVwiLCBmdW5jdGlvbiAoJHNjb3BlLCBsb2dpblNlcnZpY2UpIHtcblx0XHR0aGlzLiRvbkluaXQgPSBmdW5jdGlvbiAoKSB7XG5cdFx0XHR2YXIgX3RoaXMgPSB0aGlzO1xuXG5cdFx0XHQvLyBlcnJvciBoYW5kbGVyIGZvciBwcm9taXNlcyBiZWxvd1xuXHRcdFx0dGhpcy5fcHJvY2Vzc0Vycm9yID0gZnVuY3Rpb24gKGVycm9yKSB7XG5cdFx0XHRcdF90aGlzLmVycm9yID0gZXJyb3I7XG5cdFx0XHRcdCRzY29wZS4kYXBwbHkoKTsgLy8gd2UgdXNlICRzY29wZS5hcHBseSB0byB0cmlnZ2VyIEFuZ3VsYXIgYmluZGluZyB1cGRhdGVzIHNpbmNlIGxvZ2luU2VydmljZSBkb2Vzbid0IHVzZSAkcVxuXHRcdFx0XHQvLyB0byBwZXJmb3JtIHRoZSBzYW1lIGFjdGlvblxuXHRcdFx0fTtcblxuXHRcdFx0Ly8gc3VjY2VzcyBoYW5kbGVyIGZvciBwcm9taXNlcyBiZWxvd1xuXHRcdFx0dGhpcy5fcHJvY2Vzc1N1Y2Nlc3MgPSBmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdF90aGlzLmNsb3NlTW9kYWwoKTtcblx0XHRcdFx0JHNjb3BlLiRhcHBseSgpOyAvLyB3ZSB1c2UgJHNjb3BlLmFwcGx5IHRvIHRyaWdnZXIgQW5ndWxhciBiaW5kaW5nIHVwZGF0ZXMgc2luY2UgbG9naW5TZXJ2aWNlIGRvZXNuJ3QgdXNlICRxXG5cdFx0XHRcdC8vIHRvIHBlcmZvcm0gdGhlIHNhbWUgYWN0aW9uXG5cdFx0XHR9O1xuXG5cdFx0XHQvLyBvdXIgYWN0dWFsIGxvZ2luIHdvcmssIGJyb3VnaHQgdG8gdXMgYnkgdGhlIGhhcmQgd29ya2luJyBsb2dpblNlcnZpY2Vcblx0XHRcdHRoaXMubG9naW4gPSBmdW5jdGlvbiAodXNlclBhcmFtLCBwYXNzd29yZFBhcmFtKSB7XG5cdFx0XHRcdHJldHVybiBsb2dpblNlcnZpY2UubG9naW4odXNlclBhcmFtLCBwYXNzd29yZFBhcmFtKS50aGVuKF90aGlzLl9wcm9jZXNzU3VjY2VzcykuY2F0Y2goX3RoaXMuX3Byb2Nlc3NFcnJvcik7XG5cdFx0XHR9O1xuXG5cdFx0XHR0aGlzLmdpdExvZ2luID0gZnVuY3Rpb24gKCkge1xuXHRcdFx0XHRyZXR1cm4gbG9naW5TZXJ2aWNlLmdpdExvZ2luKCkudGhlbihfdGhpcy5fcHJvY2Vzc1N1Y2Nlc3MpLmNhdGNoKF90aGlzLl9wcm9jZXNzRXJyb3IpO1xuXHRcdFx0fTtcblxuXHRcdFx0Ly8gY2FsbCBvdXIgcGFyZW50J3MgY2xvc2UgbW9kYWwgcm91dGluZSBpbiBhZGRpdGlvbiB0byBjbGVhcmluZyB0aGUgbG9naW4gZm9ybVxuXHRcdFx0dGhpcy5jbG9zZU1vZGFsID0gZnVuY3Rpb24gKCkge1xuXHRcdFx0XHQvLyBoaWRlIG1vZGFsIGltbWVkaWF0ZWx5XG5cdFx0XHRcdF90aGlzLm1vZGFsLmNsb3NlKCk7XG5cblx0XHRcdFx0Ly8gY2xlYXIgdGhlc2UgdGhlcmVhZnRlclxuXHRcdFx0XHRfdGhpcy5sb2dpbmZvcm0uY29udHJvbHMgPSB7fTtcblx0XHRcdFx0X3RoaXMubG9naW5mb3JtLiRzZXRQcmlzdGluZSgpO1xuXHRcdFx0XHRfdGhpcy5lcnJvciA9IG51bGw7XG5cdFx0XHR9O1xuXHRcdH07XG5cdH1dKTtcbn0pKHdpbmRvdy5hbmd1bGFyKTtcblwidXNlIHN0cmljdFwiO1xuXG4oZnVuY3Rpb24gKGFuZ3VsYXIpIHtcblx0YW5ndWxhci5tb2R1bGUoXCJhcHBsaWNhdGlvblwiKS5jb21wb25lbnQoXCJtb2RhbExvZ2luXCIsIHtcblx0XHRyZXF1aXJlOiB7XG5cdFx0XHRtb2RhbDogXCJeaG9tZW1hZGVNb2RhbFwiXG5cdFx0fSxcblx0XHR0ZW1wbGF0ZVVybDogXCJ3d3cvYXBwL2NvbXBvbmVudHMvaG9tZW1hZGVNb2RhbC9tb2RhbExvZ2luL21vZGFsTG9naW4uaHRtXCIsXG5cdFx0Y29udHJvbGxlcjogXCJtb2RhbExvZ2luQ29udHJvbGxlclwiLFxuXHRcdGNvbnRyb2xsZXJBczogXCJ2bVwiXG5cdH0pO1xufSkod2luZG93LmFuZ3VsYXIpO1xuXCJ1c2Ugc3RyaWN0XCI7XG5cbihmdW5jdGlvbiAoYW5ndWxhcikge1xuXHRhbmd1bGFyLm1vZHVsZShcImFwcGxpY2F0aW9uXCIpLmNvbnRyb2xsZXIoXCJtb2RhbFByb21wdENvbnRyb2xsZXJcIiwgZnVuY3Rpb24gKCkge1xuXHRcdHRoaXMuJG9uSW5pdCA9IGZ1bmN0aW9uICgpIHtcblx0XHRcdC8vIGNyZWF0ZSBwcm9wZXJ0aWVzIGZyb20gb3VyIHBhcmVudCBtb2RhbCBjb21wb25lbnQncyAocmVxdWlyZSkgcHJvcGVydGllcyBzbyB3ZSBjYW5cblx0XHRcdC8vIGNvbnZlbmllbnRseSBiaW5kIHRoZW0gaW4gb3VyIG1vZGFsJ3Mgdmlld1xuXG5cdFx0XHQvLyB0aGlzIGlzIGEgZnVuY3Rpb24gcmVmZXJlbmNlIHRoYXQgd2UgYmluZCB0b1xuXHRcdFx0dGhpcy5jbG9zZSA9IHRoaXMubW9kYWwuY2xvc2U7XG5cblx0XHRcdC8vIHRoaXMgaXMgYSBjb25maWd1cmF0aW9uIG9iamVjdCB3ZSBiaW5kIHRvXG5cdFx0XHR0aGlzLm1vZGFsID0gdGhpcy5tb2RhbC5tb2RhbDtcblx0XHR9O1xuXHR9KTtcbn0pKHdpbmRvdy5hbmd1bGFyKTtcblwidXNlIHN0cmljdFwiO1xuXG4oZnVuY3Rpb24gKGFuZ3VsYXIpIHtcblx0YW5ndWxhci5tb2R1bGUoXCJhcHBsaWNhdGlvblwiKS5jb21wb25lbnQoXCJtb2RhbFByb21wdFwiLCB7XG5cdFx0cmVxdWlyZToge1xuXHRcdFx0bW9kYWw6IFwiXmhvbWVtYWRlTW9kYWxcIlxuXHRcdH0sXG5cdFx0dGVtcGxhdGVVcmw6IFwid3d3L2FwcC9jb21wb25lbnRzL2hvbWVtYWRlTW9kYWwvbW9kYWxQcm9tcHQvbW9kYWxQcm9tcHQuaHRtXCIsXG5cdFx0Y29udHJvbGxlcjogXCJtb2RhbFByb21wdENvbnRyb2xsZXJcIixcblx0XHRjb250cm9sbGVyQXM6IFwidm1cIlxuXHR9KTtcbn0pKHdpbmRvdy5hbmd1bGFyKTtcblwidXNlIHN0cmljdFwiO1xuXG4oZnVuY3Rpb24gKGFuZ3VsYXIpIHtcblx0YW5ndWxhci5tb2R1bGUoXCJhcHBsaWNhdGlvblwiKS5jb250cm9sbGVyKFwibW9kYWxSZWdpc3RlckNvbnRyb2xsZXJcIiwgW1wiJHNjb3BlXCIsIFwicmVnaXN0ZXJTZXJ2aWNlXCIsIGZ1bmN0aW9uICgkc2NvcGUsIHJlZ2lzdGVyU2VydmljZSkge1xuXHRcdHRoaXMuJG9uSW5pdCA9IGZ1bmN0aW9uICgpIHtcblx0XHRcdHZhciBfdGhpcyA9IHRoaXM7XG5cblx0XHRcdHRoaXMuX3Byb2Nlc3NFcnJvciA9IGZ1bmN0aW9uIChlcnJvcikge1xuXHRcdFx0XHRfdGhpcy5lcnJvciA9IGVycm9yO1xuXHRcdFx0XHQvLyB0cmlnZ2VyIGRpZ2VzdCBzaW5jZSBGaXJlYmFzZSBwcm9taXNlIHdvbid0XG5cdFx0XHRcdCRzY29wZS4kYXBwbHkoKTtcblx0XHRcdH07XG5cblx0XHRcdHRoaXMuX3Byb2Nlc3NTdWNjZXNzID0gZnVuY3Rpb24gKHJlc3VsdHMpIHtcblx0XHRcdFx0X3RoaXMuY2xvc2VNb2RhbCgpO1xuXHRcdFx0XHQvLyB0cmlnZ2VyIGRpZ2VzdCBzaW5jZSBGaXJlYmFzZSBwcm9taXNlIHdvbid0XG5cdFx0XHRcdCRzY29wZS4kYXBwbHkoKTtcblx0XHRcdH07XG5cblx0XHRcdC8vIG91ciBhY3R1YWwgcmVnaXN0ZXIgd29yaywgYnJvdWdodCB0byB1cyBieSB0aGUgaGFyZCB3b3JraW4nIHJlZ2lzdGVyU2VydmljZVxuXHRcdFx0dGhpcy5yZWdpc3RlciA9IGZ1bmN0aW9uIChyZWdpc3RlckZvcm1EYXRhLCBwYXNzd29yZCkge1xuXHRcdFx0XHRyZXR1cm4gcmVnaXN0ZXJTZXJ2aWNlLnJlZ2lzdGVyKHJlZ2lzdGVyRm9ybURhdGEsIHBhc3N3b3JkKS50aGVuKF90aGlzLl9wcm9jZXNzU3VjY2VzcykuY2F0Y2goX3RoaXMuX3Byb2Nlc3NFcnJvcik7XG5cdFx0XHR9O1xuXG5cdFx0XHR0aGlzLmNsb3NlTW9kYWwgPSBmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdC8vIGhpZGUgbW9kYWwgaW1tZWRpYXRlbHlcblx0XHRcdFx0X3RoaXMubW9kYWwuY2xvc2UoKTtcblxuXHRcdFx0XHQvLyBjbGVhciB0aGVzZSB0aGVyZWFmdGVyXG5cdFx0XHRcdF90aGlzLnJlZ2lzdGVyZm9ybS5jb250cm9scyA9IHt9O1xuXHRcdFx0XHRfdGhpcy5yZWdpc3RlcmZvcm0uJHNldFByaXN0aW5lKCk7XG5cdFx0XHRcdF90aGlzLmVycm9yID0gbnVsbDtcblx0XHRcdH07XG5cdFx0fTtcblx0fV0pO1xufSkod2luZG93LmFuZ3VsYXIpO1xuXCJ1c2Ugc3RyaWN0XCI7XG5cbihmdW5jdGlvbiAoYW5ndWxhcikge1xuXHRhbmd1bGFyLm1vZHVsZShcImFwcGxpY2F0aW9uXCIpLmNvbXBvbmVudChcIm1vZGFsUmVnaXN0ZXJcIiwge1xuXHRcdHJlcXVpcmU6IHtcblx0XHRcdG1vZGFsOiBcIl5ob21lbWFkZU1vZGFsXCJcblx0XHR9LFxuXHRcdHRlbXBsYXRlVXJsOiBcInd3dy9hcHAvY29tcG9uZW50cy9ob21lbWFkZU1vZGFsL21vZGFsUmVnaXN0ZXIvbW9kYWxSZWdpc3Rlci5odG1cIixcblx0XHRjb250cm9sbGVyOiBcIm1vZGFsUmVnaXN0ZXJDb250cm9sbGVyXCIsXG5cdFx0Y29udHJvbGxlckFzOiBcInZtXCJcblx0fSk7XG59KSh3aW5kb3cuYW5ndWxhcik7IiwiKGZ1bmN0aW9uIChhbmd1bGFyKSB7XHJcblx0YW5ndWxhclxyXG5cdFx0Lm1vZHVsZShcImFwcGxpY2F0aW9uXCIpXHJcblx0XHQuZmFjdG9yeShcIm1vZGFsU2VydmljZVwiLCBbXCIkcVwiLCBcInNldHRpbmdzXCIsIGZ1bmN0aW9uKCRxLCBzZXR0aW5ncykge1xyXG5cdFx0XHRsZXQgbW9kYWwgPSB7XHJcblx0XHRcdFx0aXNMb2dpbiAgICAgICAgOiBmYWxzZSxcclxuXHRcdFx0XHRpc1JlZ2lzdGVyICAgICA6IGZhbHNlLFxyXG5cdFx0XHRcdGlzUHJvbXB0ICAgICAgIDogZmFsc2VcclxuXHRcdFx0fTtcclxuXHJcblx0XHRcdHJldHVybiB7XHJcblx0XHRcdFx0bW9kYWwsICAvLyB3aGF0IG91ciBjaGlsZHJlbiBiaW5kIHRvXHJcblxyXG5cdFx0XHRcdHNob3dMb2dpbixcclxuXHRcdFx0XHRzaG93UmVnaXN0ZXIsXHJcblx0XHRcdFx0c2hvd1Byb21wdCxcclxuXHRcdFx0XHRjbG9zZVxyXG5cdFx0XHR9O1xyXG5cclxuXHRcdFx0Ly8gc2V0IHVwIG91ciBtb2RhbCBmb3IgbG9naW5cclxuXHRcdFx0ZnVuY3Rpb24gc2hvd0xvZ2luKGNhbGxiYWNrKSB7XHJcblx0XHRcdFx0bW9kYWwubWVzc2FnZSA9IFwiTG9naW4gdG8gXCIgKyBzZXR0aW5ncy50aXRsZTtcclxuXHRcdFx0XHRtb2RhbC5idXR0b25PYmoxID0gbnVsbDtcclxuXHRcdFx0XHRtb2RhbC5idXR0b25PYmoyID0ge1xyXG5cdFx0XHRcdFx0dGV4dCAgICAgOiBcIkxvZ2luXCIsXHJcblx0XHRcdFx0XHRjYWxsYmFjayA6ICRxLndoZW4oY2FsbGJhY2spXHJcblx0XHRcdFx0fTtcclxuXHRcdFx0XHRtb2RhbC5pc0xvZ2luID0gdHJ1ZTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0ZnVuY3Rpb24gc2hvd1JlZ2lzdGVyKGNhbGxiYWNrKSB7XHJcblx0XHRcdFx0bW9kYWwubWVzc2FnZSA9IFwiUmVnaXN0ZXIgZm9yIFwiICsgc2V0dGluZ3MudGl0bGU7XHJcblx0XHRcdFx0bW9kYWwuYnV0dG9uT2JqMSA9IG51bGw7XHJcblx0XHRcdFx0bW9kYWwuYnV0dG9uT2JqMiA9IHtcclxuXHRcdFx0XHRcdHRleHQgICAgIDogXCJSZWdpc3RlclwiLFxyXG5cdFx0XHRcdFx0Y2FsbGJhY2sgOiAkcS53aGVuKGNhbGxiYWNrKVxyXG5cdFx0XHRcdH07XHJcblx0XHRcdFx0bW9kYWwuaXNSZWdpc3RlciA9IHRydWU7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vIHNldCB1cCBvdXIgbW9kYWwgZm9yIHByb21wdFxyXG5cdFx0XHRmdW5jdGlvbiBzaG93UHJvbXB0KG1lc3NhZ2UsIGJ1dHRvbk9iajEsIGJ1dHRvbk9iajIpIHtcclxuXHRcdFx0XHQvLyB2YWxpZGF0aW9uXHJcblx0XHRcdFx0bGV0IGVycm9yU3RyaW5nID0gXCJZb3UgZGlkbid0IHVzZSBtZSByaWdodFwiO1xyXG5cclxuXHRcdFx0XHRpZiAoYnV0dG9uT2JqMSAmJiB0eXBlb2YgYnV0dG9uT2JqMSAhPT0gJ29iamVjdCcpXHJcblx0XHRcdFx0XHR0aHJvdyBuZXcgRXJyb3IoZXJyb3JTdHJpbmcpO1xyXG5cclxuXHRcdFx0XHRpZiAoYnV0dG9uT2JqMiAmJiB0eXBlb2YgYnV0dG9uT2JqMiAhPT0gJ29iamVjdCcpXHJcblx0XHRcdFx0XHR0aHJvdyBuZXcgRXJyb3IoZXJyb3JTdHJpbmcpO1xyXG5cclxuXHRcdFx0XHQvLyBzZXQgb3VyIG1vZGFsIG9iamVjdCBwcm9wZXJ0aWVzXHJcblx0XHRcdFx0bW9kYWwubWVzc2FnZSA9IG1lc3NhZ2U7XHJcblx0XHRcdFx0bW9kYWwuYnV0dG9uT2JqMSA9IGJ1dHRvbk9iajE7XHJcblx0XHRcdFx0bW9kYWwuYnV0dG9uT2JqMiA9IGJ1dHRvbk9iajI7XHJcblx0XHRcdFx0bW9kYWwuaXNQcm9tcHQgPSB0cnVlO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvLyBzZXQgdGhlIG1vZGFsIG9iamVjdCB0byBhIHByaXN0aW5lIHN0YXRlIHdpdGhvdXQgcmVhc3NpZ25tZW50XHJcblx0XHRcdGZ1bmN0aW9uIGNsb3NlKCkge1xyXG5cdFx0XHRcdGRlbGV0ZSBtb2RhbC5idXR0b25PYmoxO1xyXG5cdFx0XHRcdGRlbGV0ZSBtb2RhbC5idXR0b25PYmoyO1xyXG5cclxuXHRcdFx0XHRtb2RhbC5pc0xvZ2luID0gZmFsc2U7XHJcblx0XHRcdFx0bW9kYWwuaXNSZWdpc3RlciA9IGZhbHNlO1xyXG5cdFx0XHRcdG1vZGFsLmlzUHJvbXB0ID0gZmFsc2U7XHJcblx0XHRcdFx0bW9kYWwubWVzc2FnZSA9IG51bGw7XHJcblx0XHRcdH1cclxuXHRcdH1dKTtcclxufSAod2luZG93LmFuZ3VsYXIpKVxyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxuXHJcbihmdW5jdGlvbiAoYW5ndWxhcikge1xyXG5cdGFuZ3VsYXJcclxuXHRcdC5tb2R1bGUoXCJhcHBsaWNhdGlvblwiKVxyXG5cclxuXHRcdC5mYWN0b3J5KFwibmF2aWdhdGlvblNlcnZpY2VcIiwgW1wiJHJvdXRlXCIsIGZ1bmN0aW9uICgkcm91dGUpIHtcclxuXHRcdFx0bGV0IGFwcGxpY2F0aW9uQW5ndWxhclJvdXRlcyA9IF9mZXRjaFJvdXRlc1BhaXJzKCk7XHJcblxyXG5cdFx0XHRyZXR1cm4ge1xyXG5cdFx0XHRcdGFwcGxpY2F0aW9uQW5ndWxhclJvdXRlc1xyXG5cdFx0XHR9O1xyXG5cclxuXHRcdFx0ZnVuY3Rpb24gX2ZldGNoUm91dGVzUGFpcnMoKSB7XHJcblx0XHRcdFx0Y29uc29sZS5sb2coXCJCdWlsZGluZyByb3V0ZXMgZnJvbSBzZXJ2aWNlIFxcXCJuYXZpZ2F0aW9uU2VydmljZVxcXCJcIik7XHJcblxyXG5cdFx0XHRcdGNvbnN0IHJldHVybkFycmF5T2ZVcmxOYW1lUGFpcnMgPSBbXTtcclxuXHJcblx0XHRcdFx0YW5ndWxhci5mb3JFYWNoKCRyb3V0ZS5yb3V0ZXMsIGZ1bmN0aW9uIChyKSB7XHJcblx0XHRcdFx0XHQvLyB3ZSBkb24ndCB3YW50IHJlZGlyZWN0IHJvdXRlcyBPUlxyXG5cdFx0XHRcdFx0Ly8gcm91dGVzIHdpdGhvdXQgZGlyZWN0IGNvbnRyb2xsZXJzXHJcblx0XHRcdFx0XHQvLyAodGhlc2UgYXJlIGNvbXBvbmVudHMpXHJcblxyXG5cdFx0XHRcdFx0aWYgKCEhci5yZWRpcmVjdFRvIHx8ICFyLmNvbnRyb2xsZXIpIHtcclxuXHRcdFx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRcdGxldCByb3V0ZVVybE5hbWVQYWlyID0ge1xyXG5cdFx0XHRcdFx0XHR1cmw6IHIub3JpZ2luYWxQYXRoIHx8ICcvJyxcdFx0XHRcdFx0XHRcdFx0Ly8gb3VyIHVybCB3aWxsIGJlIHdoYXQgQW5ndWxhciB0cmFja3MgYXMgXCJvcmlnaW5hbFBhdGhcIlxyXG5cdFx0XHRcdFx0XHRuYW1lOiByLmNvbnRyb2xsZXIucmVwbGFjZSgvY29udHJvbGxlci9naSwgXCJcIilcdFx0Ly8gdXNlIEphdmFTY3JpcHQgcmVwbGFjZSgpIHRvIHRyaW0gY29udHJvbGxlciBwYXRoIHRvXHJcblx0XHRcdFx0XHRcdC8vIGp1c3QgdGhlIG5hbWVcclxuXHRcdFx0XHRcdH07XHJcblxyXG5cdFx0XHRcdFx0cmV0dXJuQXJyYXlPZlVybE5hbWVQYWlycy5wdXNoKHJvdXRlVXJsTmFtZVBhaXIpO1xyXG5cdFx0XHRcdH0pO1xyXG5cclxuXHRcdFx0XHRyZXR1cm4gX2FycmFuZ2VSb3V0ZUVsZW1lbnRUb0ZpcnN0KFwid2VsY29tZVwiLCByZXR1cm5BcnJheU9mVXJsTmFtZVBhaXJzKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0ZnVuY3Rpb24gX2FycmFuZ2VSb3V0ZUVsZW1lbnRUb0ZpcnN0KHJvdXRlTmFtZSwgYXJyYXkpIHtcclxuXHRcdFx0XHRjb25zb2xlLmxvZyhcIkFycmFuZ2luZyBcXFwiXCIgKyByb3V0ZU5hbWUgKyBcIlxcXCIgdG8gYmVnaW5uaW5nIG9mIHJvdXRlcyBsaXN0XCIpO1xyXG5cclxuXHRcdFx0XHRhcnJheS5mb3JFYWNoKGZ1bmN0aW9uIChlbGVtZW50SW5BcnJheSwgaW5kZXhPZkVsZW1lbnQpIHtcclxuXHRcdFx0XHRcdGlmIChlbGVtZW50SW5BcnJheS5uYW1lICYmIGVsZW1lbnRJbkFycmF5Lm5hbWUudG9Mb3dlckNhc2UoKSA9PT0gcm91dGVOYW1lLnRvTG93ZXJDYXNlKCkpIHtcclxuXHRcdFx0XHRcdFx0YXJyYXkuc3BsaWNlKGluZGV4T2ZFbGVtZW50LCAxKTtcclxuXHRcdFx0XHRcdFx0YXJyYXkuc3BsaWNlKDAsIDAsIGVsZW1lbnRJbkFycmF5KTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9KTtcclxuXHJcblx0XHRcdFx0cmV0dXJuIGFycmF5O1xyXG5cdFx0XHR9XHJcblx0XHR9XSk7XHJcbn0od2luZG93LmFuZ3VsYXIpKSIsIlwidXNlIHN0cmljdFwiO1xyXG5cclxuKGZ1bmN0aW9uIChhbmd1bGFyKSB7XHJcblx0YW5ndWxhclxyXG5cdFx0Lm1vZHVsZShcImFwcGxpY2F0aW9uXCIpXHJcblx0XHQuZmFjdG9yeShcInJvb21zU2VydmljZVwiLCBbXCIkcVwiLCBcIiRodHRwXCIsIGZ1bmN0aW9uKCRxLCAkaHR0cCkge1xyXG5cdFx0XHQvLyBsZXQncyBpbml0IHRoZSByb29tcyBvbmx5IHdoZW4gdGhpcyBzZXJ2aWNlIGlzIGNvbnN0cnVjdGVkLi4uIGFuZCBuZXZlciBhZ2Fpbi4uLlxyXG5cdFx0XHQvLyBtYXkgbm90IGJlIHRoZSBiZXN0IGlkZWEgYnV0IEkgZG9uJ3Qgc2VlIHJvb21zIGNoYW5naW5nIGFsbCB0aGF0IG9mdGVuIGluIHRoaXNcclxuXHRcdFx0Ly8gZmFjaWxpdHk7IGxvZ2luU2VydmljZSBpcyB0aGVuIHRhc2tlZCB3aXRoIGluaXRpYWxpemluZyB0aGlzIHNlcnZpY2UgYmVjYXVzZVxyXG5cdFx0XHQvLyBvbmx5IGxvZ2dlZCBpbiB1c2VycyBtYXkgdmlldyByb29tc1xyXG5cclxuXHRcdFx0bGV0IF9yb29tc0Zyb21GaXJlYmFzZSA9IG51bGw7XHJcblxyXG5cdFx0XHRyZXR1cm4ge1xyXG5cdFx0XHRcdGluaXRpYWxpemVSb29tc0Zyb21GaXJlYmFzZSxcclxuXHRcdFx0XHRyZXR1cm5GZXRjaGVkUm9vbXNcclxuXHRcdFx0fTtcclxuXHJcblx0XHRcdGZ1bmN0aW9uIGluaXRpYWxpemVSb29tc0Zyb21GaXJlYmFzZSgpIHtcclxuXHRcdFx0XHRfcm9vbXNGcm9tRmlyZWJhc2UgPSBudWxsO1xyXG5cclxuXHRcdFx0XHQvLyB0d28gd2F5cyB0byBnZXQgdGhlIGRhdGEuLi4gdmlhIHJlc3QgZW5kcG9pbnQgdXNpbmcgJGh0dHAgb3IgRmlyZWJhc2UgcmVmIHdyYXBwZWQgaW4gJHFcclxuXHRcdFx0XHQvLyB0aGlzIGhhcyBubyB0b2tlbiwgc28gc2VjdXJpdHkgaGFzIHRvIGJlIGxheCBvbiB0aGUgYmFjay1lbmQgaW4gb3JkZXIgdG8gZ2V0IGEgMjAwIHJlc3BvbnNlXHJcblx0XHRcdFx0Ly9cdFx0cmV0dXJuICRodHRwKHtcclxuXHRcdFx0XHQvL1x0XHRcdHVybCAgICA6IFwiaHR0cHM6Ly9jb25mZGVjb25mbGljdG9yLmZpcmViYXNlaW8uY29tL3Jvb21zLmpzb25cIixcclxuXHRcdFx0XHQvL1x0XHRcdG1ldGhvZCA6IFwiR0VUXCJcclxuXHRcdFx0XHQvL1x0XHR9KVxyXG5cdFx0XHRcdC8vIHRoaXMgbWV0aG9kLCB0aG91Z2gsIGF0dGFjaGVzIGF1dGhlbnRpY2F0aW9uIHRvIHRoZSByZXF1ZXN0IHNvIGlmIEkgbG9jayB0aGUgcmVzb3VyY2VcclxuXHRcdFx0XHQvLyBkb3duIHRvIGF1dGhlbnRpY2F0ZWQgdXNlcnMsIHRoaXMgd2lsbCByZXR1cm4gcmVzdWx0cyBvbmNlIGEgdXNlciBkb2VzIGF1dGhlbnRpY2F0ZVxyXG5cdFx0XHRcdHJldHVybiAkcS53aGVuKGZpcmViYXNlLmRhdGFiYXNlKCkucmVmKFwiL3Jvb21zL1wiKS5vbmNlKFwidmFsdWVcIikpXHJcblx0XHRcdFx0XHQudGhlbihmdW5jdGlvbihyb29tcykge1xyXG5cdFx0XHRcdFx0XHRpZiAocm9vbXMudmFsKVxyXG5cdFx0XHRcdFx0XHRcdHJvb21zID0gcm9vbXMudmFsKCk7IC8vIHVzaW5nIEZpcmViYXNlIGFib3ZlXHJcblx0XHRcdFx0XHRcdGVsc2VcclxuXHRcdFx0XHRcdFx0XHRyb29tcyA9IHJvb21zLmRhdGE7ICAvLyB1c2luZyAkaHR0cCBhYm92ZVxyXG5cclxuXHRcdFx0XHRcdFx0Y29uc29sZS5sb2cocm9vbXMubGVuZ3RoICsgXCIgcm9vbXMgZmV0Y2hlZCBmcm9tIEZpcmViYXNlIGRhdGFiYXNlXCIpO1xyXG5cclxuXHRcdFx0XHRcdFx0X3Jvb21zRnJvbUZpcmViYXNlID0gcm9vbXM7XHJcblx0XHRcdFx0XHR9KTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0ZnVuY3Rpb24gcmV0dXJuRmV0Y2hlZFJvb21zKCkge1xyXG5cdFx0XHRcdHJldHVybiBfcm9vbXNGcm9tRmlyZWJhc2U7XHJcblx0XHRcdH1cclxuXHRcdH1dKTtcclxufSh3aW5kb3cuYW5ndWxhcikpOyIsIlwidXNlIHN0cmljdFwiO1xyXG5cclxuKGZ1bmN0aW9uKGFuZ3VsYXIpIHtcclxuXHRhbmd1bGFyXHJcblx0XHQubW9kdWxlKFwiYXBwbGljYXRpb25cIilcclxuXHRcdC5mYWN0b3J5KFwicmVnaXN0ZXJTZXJ2aWNlXCIsIFtcIiRodHRwXCIsIFwic2V0dGluZ3NcIiwgXCJsb2dpblNlcnZpY2VcIiwgZnVuY3Rpb24gKCRodHRwLCBzZXR0aW5ncywgbG9naW5TZXJ2aWNlKSB7XHJcblx0XHRcdHJldHVybiB7XHJcblx0XHRcdFx0cmVnaXN0ZXJcclxuXHRcdFx0fTtcclxuXHJcblx0XHRcdGZ1bmN0aW9uIHJlZ2lzdGVyKGRhdGEsIHBhc3N3b3JkKSB7XHJcblx0XHRcdFx0Ly8gcGFzcyBpbiBkYXRhIGFuZCBwYXNzd29yZCBzZXBhcmF0ZWx5IHNvIEkgZG9uJ3QgaGF2ZSB0byBzYW5pdGl6ZSB0aGUgZGF0YVxyXG5cdFx0XHRcdC8vIGVudGl0eSBiZWZvcmUgd3JpdGUgdG8gRmlyZWJhc2UuLi4gb3RoZXJ3aXNlLCBwYXNzd29yZCB3b3VsZCBiZSBpbmNsdWRlZFxyXG5cdFx0XHRcdC8vIGluIG91ciBmb3JtIGRhdGEgYW5kIHRoYXQgd291bGQgYmUgYSBjb25jZXJuIGlmIGl0IGdvdCB3cml0dGVuIHRvIGRhdGFiYXNlLFxyXG5cdFx0XHRcdC8vIHBsYWluIHRleHQuLi4gdHJlYXQgY29sbGVjdGVkIGRhdGEgd2l0aCByZXNwZWN0ISAgOi0pXHJcblx0XHRcdFx0Y29uc29sZS5sb2coXCJSZWdpc3RlciB1c2VyIGVudGl0eTogXCIsIGRhdGEpO1xyXG5cclxuXHRcdFx0XHQvLyByZXR1cm4gYSBGaXJlYmFzZSBwcm9taXNlOyB0aGlzIHVwZGF0ZXMgb3VyIGF1dGhlbnRpY2F0aW9uIHRoZW4gc3Vic2VxdWVudGx5XHJcblx0XHRcdFx0Ly8gd3JpdGVzIG91ciBmdWxsIGZvcm0gZGF0YSB0byBGaXJlYmFzZSBhbmQgcmV0dXJucyB0aGUgZGF0YSBwcm9wZXJ0eSB0aGF0XHJcblx0XHRcdFx0Ly8gJGh0dHAgZnVsZmlsbHMgd2l0aFxyXG5cdFx0XHRcdHJldHVybiBjcmVhdGVGaXJlYmFzZUF1dGhlbnRpY2F0aW9uKGRhdGEsIHBhc3N3b3JkKVxyXG5cdFx0XHRcdFx0LnRoZW4od3JpdGVGb3JtRGF0YVRvRmlyZWJhc2UpXHJcblx0XHRcdFx0XHQudGhlbihyZXR1cm5EYXRhRnJvbVJlc3VsdHMpO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRmdW5jdGlvbiBjcmVhdGVGaXJlYmFzZUF1dGhlbnRpY2F0aW9uKGRhdGEsIHBhc3N3b3JkKSB7XHJcblx0XHRcdFx0cmV0dXJuIGZpcmViYXNlLmF1dGgoKS5jcmVhdGVVc2VyV2l0aEVtYWlsQW5kUGFzc3dvcmQoZGF0YS5lbWFpbCwgcGFzc3dvcmQpXHJcblx0XHRcdFx0XHQudGhlbihmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRcdFx0Ly8gbW92ZSBkYXRhIGFsb25nIHRoZSBwcm9taXNlIGNoYWluIGJ5IHJldHVybmluZyBpdCBvbmNlIHRoaXMgcHJvbWlzZSBmdWxmaWxsc1xyXG5cdFx0XHRcdFx0XHRyZXR1cm4gZGF0YTtcclxuXHRcdFx0XHRcdH0pO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRmdW5jdGlvbiB3cml0ZUZvcm1EYXRhVG9GaXJlYmFzZShkYXRhKSB7XHJcblx0XHRcdFx0cmV0dXJuICRodHRwKHtcclxuXHRcdFx0XHRcdHVybCAgICA6IHNldHRpbmdzLmZldGNoUmVzdFVybChcInVzZXJzL1wiICsgZGF0YS5lbWFpbC5yZXBsYWNlKFwiLlwiLCBcIl9cIikudG9Mb3dlckNhc2UoKSksXHJcblx0XHRcdFx0XHRtZXRob2QgOiBcIlBVVFwiLFxyXG5cdFx0XHRcdFx0ZGF0YVxyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRmdW5jdGlvbiByZXR1cm5EYXRhRnJvbVJlc3VsdHMocmVzdWx0cykge1xyXG5cdFx0XHRcdGxvZ2luU2VydmljZS51cGRhdGVMb2dpblN0YXR1cyhyZXN1bHRzLmRhdGEpO1xyXG5cdFx0XHRcdHJldHVybiByZXN1bHRzLmRhdGE7XHJcblx0XHRcdH1cclxuXHRcdH1dKTtcclxufSh3aW5kb3cuYW5ndWxhcikpOyIsIlwidXNlIHN0cmljdFwiO1xyXG5cclxuKGZ1bmN0aW9uIChhbmd1bGFyKSB7XHJcblx0YW5ndWxhclxyXG5cdFx0Lm1vZHVsZShcImFwcGxpY2F0aW9uXCIpXHJcblx0XHQuY29udHJvbGxlcihcImV4ZXJjaXNlMUNvbnRyb2xsZXJcIiwgZnVuY3Rpb24obW9kYWxTZXJ2aWNlKSB7XHJcblx0XHRcdC8vIGNhcHR1cmluZyBjb250cm9sbGVyIHNjb3BlIGhlcmUsIHVzZWQgYWdhaW4gaW4gX2dldFJhbmRvbUNvbG9yXHJcblx0XHRcdGxldCB2bSA9IHRoaXM7XHJcblxyXG5cdFx0XHQvLyBjcmVhdGluZyBjYWxsYmFjayBmdW5jdGlvbiBzaG93QWxlcnRDYWxsYmFjayBiZWxvdywgSSdtIHVzaW5nIGJpbmQgdG8gc2V0IFwidGhpc1wiIGluIHRoZSBmdW5jdGlvbiB0b1xyXG5cdFx0XHQvLyB0aGlzIGNvbnRyb2xsZXIgc28gSSBjYW4gYWNjZXNzIGJvdW5kIHByb3BlcnRpZXMgbGlrZSByb2xsQnV0dG9uVGV4dFxyXG5cclxuXHRcdFx0Ly8gSSBnZXQgbXkgaG9tZW1hZGUgbW9kYWwgdG8gc2hvdyBieSBpbnZva2luZyBvdXIgc2VydmljZSBmdW5jdGlvbiwgd2hpY2ggeW91IHdyYXAgaW4gYSBmdW5jdGlvbiBzbyB5b3VcclxuXHRcdFx0Ly8gbWF5IGJpbmQgdG8gYW4gZXZlbnQgbGlrZSBuZy1jbGlja1xyXG5cdFx0XHR0aGlzLnNob3dQcm9tcHQgPSBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRtb2RhbFNlcnZpY2Uuc2hvd1Byb21wdChcclxuXHRcdFx0XHRcdFwiVGhpcyBpcyBvdXIgZmlyc3QgdGVzdFwiLFxyXG5cclxuXHRcdFx0XHRcdHtcclxuXHRcdFx0XHRcdFx0dGV4dCAgICAgOiBcIlNob3cgQWxlcnRcIixcclxuXHRcdFx0XHRcdFx0Y2FsbGJhY2sgOiBzaG93QWxlcnRDYWxsYmFjay5iaW5kKHRoaXMpXHJcblx0XHRcdFx0XHR9LFxyXG5cclxuXHRcdFx0XHRcdHtcclxuXHRcdFx0XHRcdFx0dGV4dDogXCJCZSBRdWlldFwiXHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0KTtcclxuXHRcdFx0fTtcclxuXHJcbiAgICAgIC8vVE9ETzpcclxuICAgICAgKGZ1bmN0aW9uIHllcyhubykgeyBhbGVydChubykgfSgneWVzJykpO1xyXG5cclxuXHRcdFx0Ly8gbW9kYWwgY2FsbGJhY2tcclxuXHRcdFx0ZnVuY3Rpb24gc2hvd0FsZXJ0Q2FsbGJhY2soKSB7XHJcblx0XHRcdFx0dGhpcy5yb2xsQnV0dG9uVGV4dCA9IFwiSSBjaGFuZ2VkIGJlY2F1c2UgeW91IHByZXNzZWQgYWxlcnRcIjtcclxuXHRcdFx0XHRhbGVydChcIlNob3dpbmcgYWxlcnQhXCIpO1xyXG5cdFx0XHR9XHJcblxyXG5cclxuXHRcdFx0Ly8gYmluZGFibGUgcHVibGljc1xyXG5cdFx0XHR0aGlzLnRpdGxlID0gXCJleGVyY2lzZSB0aXRsZVwiO1xyXG5cclxuXHRcdFx0dGhpcy5yb2xsQnV0dG9uVGV4dCA9IFwiUm9sbCBNZVwiO1xyXG5cclxuXHRcdFx0dGhpcy5sYXN0T2JqZWN0Q2xpY2tlZFRleHQgPSBudWxsO1xyXG5cclxuXHRcdFx0dGhpcy5wb3NzaWJsZUNvbG9ycyA9IFtcclxuXHRcdFx0XHR7XHJcblx0XHRcdFx0XHRuYW1lOiBcIkJyb3duXCIsXHJcblx0XHRcdFx0XHRoZXg6IFwiI0E1MkEyQVwiXHJcblx0XHRcdFx0fSxcclxuXHRcdFx0XHR7XHJcblx0XHRcdFx0XHRuYW1lOiBcIkJsdWVcIixcclxuXHRcdFx0XHRcdGhleDogXCIjMDAwMEZGXCJcclxuXHRcdFx0XHR9LFxyXG5cdFx0XHRcdHtcclxuXHRcdFx0XHRcdG5hbWU6IFwiR2FpbnNib3JvXCIsXHJcblx0XHRcdFx0XHRoZXg6IFwiI0RDRENEQ1wiXHJcblx0XHRcdFx0fVxyXG5cdFx0XHRdO1xyXG5cclxuXHRcdFx0dGhpcy5jb250cm9sbGVySW5pdGlhbGl6ZWRPYmplY3QgPSB7XHJcblx0XHRcdFx0bmFtZTogXCJPYmplY3QgMVwiLFxyXG5cdFx0XHRcdGNsaWNrQ291bnQ6IDAsXHJcblx0XHRcdFx0Y29sb3I6IF9nZXRSYW5kb21Db2xvcigpXHJcblx0XHRcdH07XHJcblxyXG5cdFx0XHR0aGlzLm9iamVjdEFycmF5ID0gW3RoaXMuY29udHJvbGxlckluaXRpYWxpemVkT2JqZWN0XTtcclxuXHJcblx0XHRcdHRoaXMucm9sbE1ldGhvZCA9IGZ1bmN0aW9uICgpIHtcclxuXHRcdFx0XHR0aGlzLnJvbGxCdXR0b25UZXh0ID0gXCJJJ20gUm9sbGVkXCI7XHJcblx0XHRcdH07XHJcblxyXG5cdFx0XHR0aGlzLmFkZE5ld09iamVjdCA9IGZ1bmN0aW9uICgpIHtcclxuXHRcdFx0XHRsZXQgbmV3T2JqZWN0ID0ge1xyXG5cdFx0XHRcdFx0bmFtZTogXCJPYmplY3QgXCIgKyAodGhpcy5vYmplY3RBcnJheS5sZW5ndGggKyAxKSxcclxuXHRcdFx0XHRcdGNsaWNrQ291bnQ6IDAsXHJcblx0XHRcdFx0XHRjb2xvcjogX2dldFJhbmRvbUNvbG9yKClcclxuXHRcdFx0XHR9O1xyXG5cclxuXHRcdFx0XHR0aGlzLm9iamVjdEFycmF5LnB1c2gobmV3T2JqZWN0KTtcclxuXHRcdFx0fTtcclxuXHJcblx0XHRcdHRoaXMub2JqZWN0Q2xpY2tlZCA9IGZ1bmN0aW9uIChvYmopIHtcclxuXHRcdFx0XHRvYmouY2xpY2tDb3VudCsrO1xyXG5cdFx0XHRcdHRoaXMubGFzdE9iamVjdENsaWNrZWRUZXh0ID0gb2JqLm5hbWUgKyBcIiBjbGlja2VkIFwiICsgb2JqLmNsaWNrQ291bnQgKyBcIiB0aW1lc1wiO1xyXG5cdFx0XHRcdGNvbnNvbGUubG9nKHRoaXMubGFzdE9iamVjdENsaWNrZWRUZXh0KTtcclxuXHRcdFx0fTtcclxuXHJcblx0XHRcdHRoaXMuY2xlYXJDb2xvckZpbHRlciA9IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdGlmICh0aGlzLmZpbHRlci5jb2xvciA9PT0gbnVsbCkge1xyXG5cdFx0XHRcdFx0Ly8gZGVsZXRlIGNvbG9yIGZyb20gZmlsdGVyIG9iamVjdCwgb3RoZXJ3aXNlIHRoZSBmaWx0ZXIgd2lsbCB0ZXN0IGZvciBlbGVtZW50cyBpbiBhbiBhcnJheVxyXG5cdFx0XHRcdFx0Ly8gd2l0aCBjb2xvciBzZXQgdG8gbnVsbC4uLlxyXG5cclxuXHRcdFx0XHRcdC8vIHNldHRpbmcgdGhpcy5maWx0ZXIuY29sb3IgZXF1YWwgdG8gbnVsbCBpcyBub3QgZXF1aXZhbGVudCB0byBkZWxldGUodGhpcy5maWx0ZXIuY29sb3IpXHJcblx0XHRcdFx0XHQvLyBhcyBmYXIgYXMgQW5ndWxhciBmaWx0ZXJpbmcgZ29lc1xyXG5cclxuXHRcdFx0XHRcdC8vIHBsZWFzZSBzZWUgaHR0cDovL2Fkcmlwb2ZqYXZhc2NyaXB0LmNvbS9ibG9nL2RyaXBzL3RoZS1kZWxldGUtb3BlcmF0b3ItaW4tamF2YXNjcmlwdC5odG1sXHJcblx0XHRcdFx0XHRkZWxldGUodGhpcy5maWx0ZXIuY29sb3IpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fTtcclxuXHJcblx0XHRcdC8vIGhvaXN0ZWQsIHByaXZhdGUgZnVuY3Rpb25cclxuXHRcdFx0ZnVuY3Rpb24gX2dldFJhbmRvbUNvbG9yKCkge1xyXG5cdFx0XHRcdGxldCByYW5kb21Db2xvciA9IHZtLnBvc3NpYmxlQ29sb3JzW01hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIHZtLnBvc3NpYmxlQ29sb3JzLmxlbmd0aCldO1xyXG5cclxuXHRcdFx0XHQvLyByYW5kb21Db2xvciBpcyBhY3R1YWxseSBhbiBvYmplY3QsIHdlIHJldHVybiBvbmx5IHRoZSBoZXggcHJvcGVydHkgd2UgbmVlZFxyXG5cdFx0XHRcdHJldHVybiByYW5kb21Db2xvci5oZXg7XHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG59KHdpbmRvdy5hbmd1bGFyKSk7IiwiXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG4oZnVuY3Rpb24oYW5ndWxhcikge1xyXG5cdGFuZ3VsYXJcclxuXHRcdC5tb2R1bGUoXCJhcHBsaWNhdGlvblwiKVxyXG5cdFx0LmNvbnRyb2xsZXIoXCJleGVyY2lzZTJDb250cm9sbGVyXCIsIGZ1bmN0aW9uKCkge1xyXG5cdFx0XHR0aGlzLnN1Ym1pdCA9IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdGFsZXJ0KFwiRm9ybSBzdWJtaXR0ZWRcIik7XHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG59KHdpbmRvdy5hbmd1bGFyKSk7IiwiXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG4oZnVuY3Rpb24oYW5ndWxhcikge1xyXG5cdGFuZ3VsYXJcclxuXHRcdC5tb2R1bGUoXCJhcHBsaWNhdGlvblwiKVxyXG5cdFx0LmNvbnRyb2xsZXIoXCJ3ZWxjb21lQ29udHJvbGxlclwiLCBmdW5jdGlvbigpIHsgfSk7XHJcbn0od2luZG93LmFuZ3VsYXIpKTsiLCJcInVzZSBzdHJpY3RcIjtcclxuXHJcbihmdW5jdGlvbihhbmd1bGFyKSB7XHJcblx0YW5ndWxhclxyXG5cdFx0Lm1vZHVsZShcImFwcGxpY2F0aW9uXCIpXHJcblx0XHQuY29udHJvbGxlcihcIm1vZGFsQ29udHJvbGxlclwiLCBbXCJtb2RhbFNlcnZpY2VcIiwgZnVuY3Rpb24gKG1vZGFsU2VydmljZSkge1xyXG5cdFx0XHR0aGlzLiRvbkluaXQgPSBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHQvLyBmdW5jdGlvbiByZWZlcmVuY2UgdG8gY2xvc2luZyB0aGUgbW9kYWxcclxuXHRcdFx0XHR0aGlzLmNsb3NlID0gbW9kYWxTZXJ2aWNlLmNsb3NlO1xyXG5cclxuXHRcdFx0XHQvLyBiaW5kIHRvIG91ciBtb2RhbCBjb25maWd1cmF0aW9uIGluIG1vZGFsU2VydmljZVxyXG5cdFx0XHRcdHRoaXMubW9kYWwgPSBtb2RhbFNlcnZpY2UubW9kYWw7XHJcblxyXG5cdFx0XHRcdC8vIGEgY29tYmluYXRpb24gb2YgcHJvcGVydGllcyB0byBkZXRlcm1pbmUgd2hldGhlciBvciBub3Qgd2Ugc2hvdWxkIGJlIHNob3dpbmdcclxuXHRcdFx0XHQvLyB0aGUgbW9kYWw7IHdyYXAgaW4gYSBmdW5jdGlvbiBzbyB5b3VyIGJpbmRpbmcgcmUtZXZhbHVhdGVzIHdoZW4gQW5ndWxhcidzIGJpbmRpbmdzXHJcblx0XHRcdFx0Ly8gcmVmcmVzaCB0aGVtc2VsdmVzOyBhc3NpZ25pbmcgdG8gYSBsaXRlcmFsIHdpbGwgYWx3YXlzIGJlIHRoZSBzYW1lIGFuZCB3b24ndFxyXG5cdFx0XHRcdC8vIHJlLWV2YWx1YXRlXHJcblx0XHRcdFx0dGhpcy5pc1Nob3dpbmdNb2RhbCA9IGZ1bmN0aW9uICgpIHtcclxuXHRcdFx0XHRcdHJldHVybiBtb2RhbFNlcnZpY2UubW9kYWwuaXNMb2dpbiB8fCBtb2RhbFNlcnZpY2UubW9kYWwuaXNSZWdpc3RlciB8fCBtb2RhbFNlcnZpY2UubW9kYWwuaXNQcm9tcHQ7XHJcblx0XHRcdFx0fTtcclxuXHRcdFx0fVxyXG5cdFx0fV0pO1xyXG59KHdpbmRvdy5hbmd1bGFyKSk7IiwiXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG4oZnVuY3Rpb24oYW5ndWxhcikge1xyXG5cdGFuZ3VsYXJcclxuXHRcdC5tb2R1bGUoXCJhcHBsaWNhdGlvblwiKVxyXG5cdFx0LmNvbXBvbmVudChcImhvbWVtYWRlTW9kYWxcIiwge1xyXG5cdFx0XHR0ZW1wbGF0ZVVybCAgOiBcInd3dy9hcHAvY29tcG9uZW50cy9ob21lbWFkZU1vZGFsL21vZGFsLmh0bVwiLFxyXG5cdFx0XHRjb250cm9sbGVyICAgOiBcIm1vZGFsQ29udHJvbGxlclwiLFxyXG5cdFx0XHRjb250cm9sbGVyQXMgOiBcInZtXCIsXHJcblx0XHRcdHRyYW5zY2x1ZGUgICA6IHRydWVcclxuXHRcdH0pO1xyXG59KHdpbmRvdy5hbmd1bGFyKSk7XHJcblxyXG5cclxuIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG4oZnVuY3Rpb24oYW5ndWxhcikge1xyXG5cdGFuZ3VsYXJcclxuXHRcdC5tb2R1bGUoXCJhcHBsaWNhdGlvblwiKVxyXG5cdFx0LmNvbnRyb2xsZXIoXCJuYXZpZ2F0aW9uQ29udHJvbGxlclwiLCBbXCJuYXZpZ2F0aW9uU2VydmljZVwiLCBmdW5jdGlvbihuYXZpZ2F0aW9uKSB7XHJcblx0XHRcdHRoaXMubmF2aWdhdGlvbiA9IG5hdmlnYXRpb24uYXBwbGljYXRpb25Bbmd1bGFyUm91dGVzO1xyXG5cdFx0fV0pO1xyXG59KHdpbmRvdy5hbmd1bGFyKSk7XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG5cclxuLy8gd3JhcCBhbGwgb3VyIHBpZWNlcyB0b2dldGhlciBhbmQgdGVsbCBBbmd1bGFyIG1vZHVsZSB3ZSdyZSB1c2luZ1xyXG4vLyBhYm91dCB0aGVtXHJcbihmdW5jdGlvbihhbmd1bGFyKSB7XHJcblx0YW5ndWxhclxyXG5cdFx0Lm1vZHVsZShcImFwcGxpY2F0aW9uXCIpXHJcblx0XHQuY29tcG9uZW50KFwibmF2aWdhdGlvblwiLCB7XHJcblx0XHRcdHRlbXBsYXRlVXJsICA6IFwid3d3L2FwcC9jb21wb25lbnRzL25hdmlnYXRpb24vbmF2aWdhdGlvbi5odG1cIixcclxuXHRcdFx0Y29udHJvbGxlciAgIDogXCJuYXZpZ2F0aW9uQ29udHJvbGxlclwiLFxyXG5cdFx0XHRjb250cm9sbGVyQXMgOiBcInZtXCJcclxuXHRcdH0pO1xyXG59ICh3aW5kb3cuYW5ndWxhcikpO1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxuXHJcbihmdW5jdGlvbihhbmd1bGFyKSB7XHJcblx0YW5ndWxhclxyXG5cdFx0Lm1vZHVsZShcImFwcGxpY2F0aW9uXCIpXHJcblx0XHQuY29udHJvbGxlcihcInJvb21Db250cm9sbGVyXCIsIFtcIiRyb3V0ZVBhcmFtc1wiLCBcIiRodHRwXCIsIGZ1bmN0aW9uKCRyb3V0ZVBhcmFtcywgJGh0dHApIHtcclxuXHRcdFx0dGhpcy4kb25Jbml0ID0gZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0dGhpcy5wYXJhbWV0ZXJzID0gJHJvdXRlUGFyYW1zO1xyXG5cdFx0XHRcdHRoaXMucm9vbUlkID0gJHJvdXRlUGFyYW1zLmlkO1xyXG5cdFx0XHR9O1xyXG5cdFx0fV0pO1xyXG59KHdpbmRvdy5hbmd1bGFyKSk7XHJcbiIsIihmdW5jdGlvbihhbmd1bGFyKSB7XHJcblx0YW5ndWxhclxyXG5cdFx0Lm1vZHVsZShcImFwcGxpY2F0aW9uXCIpXHJcblx0XHQuY29tcG9uZW50KFwicm9vbVwiLCB7XHJcblx0XHRcdHRlbXBsYXRlVXJsICA6IFwid3d3L2FwcC9jb21wb25lbnRzL3Jvb20vcm9vbS5odG1cIixcclxuXHRcdFx0Y29udHJvbGxlciAgIDogXCJyb29tQ29udHJvbGxlclwiLFxyXG5cdFx0XHRjb250cm9sbGVyQXMgOiBcInZtXCJcclxuXHRcdH0pO1xyXG59KHdpbmRvdy5hbmd1bGFyKSk7IiwiXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG4oZnVuY3Rpb24oYW5ndWxhcikge1xyXG5cdGFuZ3VsYXJcclxuXHRcdC5tb2R1bGUoXCJhcHBsaWNhdGlvblwiKVxyXG5cdFx0LmNvbnRyb2xsZXIoXCJyb29tc0NvbnRyb2xsZXJcIiwgW1wicm9vbXNTZXJ2aWNlXCIsIGZ1bmN0aW9uKHJvb21zU2VydmljZSkge1xyXG5cdFx0XHR0aGlzLiRvbkluaXQgPSBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHR0aGlzLnJldHVybkZldGNoZWRSb29tcyA9IHJvb21zU2VydmljZS5yZXR1cm5GZXRjaGVkUm9vbXM7XHJcblx0XHRcdH07XHJcblx0XHR9XSk7XHJcbn0od2luZG93LmFuZ3VsYXIpKTsiLCJcInVzZSBzdHJpY3RcIjtcclxuXHJcbihmdW5jdGlvbihhbmd1bGFyKSB7XHJcblx0YW5ndWxhclxyXG5cdFx0Lm1vZHVsZShcImFwcGxpY2F0aW9uXCIpXHJcblx0XHQuY29tcG9uZW50KFwicm9vbXNcIiwge1xyXG5cdFx0XHR0ZW1wbGF0ZVVybCAgOiBcInd3dy9hcHAvY29tcG9uZW50cy9yb29tcy9yb29tcy5odG1cIixcclxuXHRcdFx0Y29udHJvbGxlciAgIDogXCJyb29tc0NvbnRyb2xsZXJcIixcclxuXHRcdFx0Y29udHJvbGxlckFzIDogXCJ2bVwiLFxyXG5cdFx0XHR0cmFuc2NsdWRlICAgOiB0cnVlXHJcblx0XHR9KTtcclxufSh3aW5kb3cuYW5ndWxhcikpOyIsIlwidXNlIHN0cmljdFwiO1xyXG5cclxuKGZ1bmN0aW9uKGFuZ3VsYXIpIHtcclxuXHRhbmd1bGFyXHJcblx0XHQubW9kdWxlKFwiYXBwbGljYXRpb25cIilcclxuXHRcdC5jb250cm9sbGVyKFwibG9nZ2VkSW5Vc2VyQ29udHJvbGxlclwiLFxyXG5cdFx0XHRbXCJzZXR0aW5nc1wiLCBcIm1vZGFsU2VydmljZVwiLCBcImxvZ2luU2VydmljZVwiLFxyXG5cdFx0XHRmdW5jdGlvbihzZXR0aW5ncywgbW9kYWxTZXJ2aWNlLCBsb2dpblNlcnZpY2UpIHtcclxuXHJcblx0XHRcdHRoaXMuJG9uSW5pdCA9IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdHRoaXMuYXBwbGljYXRpb25MYWJlbCA9IHNldHRpbmdzLnRpdGxlICsgXCIgdi5cIiArIHNldHRpbmdzLnZlcnNpb247XHJcblxyXG5cdFx0XHRcdC8vIGxvZ2luIHNlcnZpY2UgYmluZGluZ3NcclxuXHRcdFx0XHR0aGlzLmZldGNoTG9nZ2VkSW5Vc2VyID0gbG9naW5TZXJ2aWNlLmZldGNoTG9nZ2VkSW5Vc2VyO1xyXG5cdFx0XHRcdHRoaXMuZmV0Y2hJc0xvZ2luQnVzeSA9IGxvZ2luU2VydmljZS5mZXRjaElzTG9naW5CdXN5O1xyXG5cdFx0XHRcdHRoaXMubG9nb3V0ID0gbG9naW5TZXJ2aWNlLmxvZ291dDtcclxuXHJcblx0XHRcdFx0Ly8gbW9kYWwgc2VydmljZSBiaW5kaW5nc1xyXG5cdFx0XHRcdHRoaXMuc2hvd0xvZ2luID0gbW9kYWxTZXJ2aWNlLnNob3dMb2dpbjtcclxuXHRcdFx0XHR0aGlzLnNob3dSZWdpc3RlciA9IG1vZGFsU2VydmljZS5zaG93UmVnaXN0ZXI7XHJcblxyXG5cdFx0XHRcdC8vIGEgY3VzdG9tIGZ1bmN0aW9uIHdlJ2xsIG1ha2UgcmlnaHQgaGVyZSBzbyB3ZSBjYW4gYmluZFxyXG5cdFx0XHRcdC8vIGEgcHJvbXB0aW5nIHRvIHRoZSBsb2dvdXQgYnV0dG9uIHNvIHRoZSB1c2VyIG1heSBjbGlja1xyXG5cdFx0XHRcdC8vIGl0IGFuZCBhbnN3ZXIgYSBxdWVzdGlvbiBiZWZvcmUgbG9zaW5nIHRoZWlyIHNlc3Npb25cclxuXHRcdFx0XHR0aGlzLmxvZ291dFByb21wdCA9IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdFx0bW9kYWxTZXJ2aWNlLnNob3dQcm9tcHQoXHJcblx0XHRcdFx0XHRcdFwiQXJlIHlvdSBzdXJlIHlvdSB3YW50IHRvIGxvZyBvdXQ/XCIsXHJcblx0XHRcdFx0XHRcdHsgdGV4dDogXCJOTywgUExFQVNFIERPTidUXCIgfSxcclxuXHRcdFx0XHRcdFx0eyB0ZXh0OiBcIkRPIElUISAgRE8gSVQhXCIsIGNhbGxiYWNrOiB0aGlzLmxvZ291dCB9XHJcblx0XHRcdFx0XHQpO1xyXG5cdFx0XHRcdH07XHJcblx0XHRcdH1cclxuXHRcdH1dKTtcclxufSh3aW5kb3cuYW5ndWxhcikpO1xyXG4iLCIoZnVuY3Rpb24oYW5ndWxhcikge1xyXG5cdGFuZ3VsYXJcclxuXHRcdC5tb2R1bGUoXCJhcHBsaWNhdGlvblwiKVxyXG5cdFx0LmNvbXBvbmVudChcImxvZ2dlZEluVXNlclwiLCB7XHJcblx0XHRcdHRlbXBsYXRlVXJsICA6IFwid3d3L2FwcC9jb21wb25lbnRzL2xvZ2dlZEluVXNlci9sb2dnZWRJblVzZXIuaHRtXCIsXHJcblx0XHRcdGNvbnRyb2xsZXIgICA6IFwibG9nZ2VkSW5Vc2VyQ29udHJvbGxlclwiLFxyXG5cdFx0XHRjb250cm9sbGVyQXMgOiBcInZtXCJcclxuXHRcdH0pO1xyXG59ICh3aW5kb3cuYW5ndWxhcikpOyIsIlwidXNlIHN0cmljdFwiO1xyXG5cclxuKGZ1bmN0aW9uKGFuZ3VsYXIpIHtcclxuXHRhbmd1bGFyXHJcblx0XHQubW9kdWxlKFwiYXBwbGljYXRpb25cIilcclxuXHRcdC5jb250cm9sbGVyKFwibW9kYWxMb2dpbkNvbnRyb2xsZXJcIiwgW1wiJHNjb3BlXCIsIFwibG9naW5TZXJ2aWNlXCIsIGZ1bmN0aW9uICgkc2NvcGUsIGxvZ2luU2VydmljZSkge1xyXG5cdFx0XHR0aGlzLiRvbkluaXQgPSBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHQvLyBlcnJvciBoYW5kbGVyIGZvciBwcm9taXNlcyBiZWxvd1xyXG5cdFx0XHRcdHRoaXMuX3Byb2Nlc3NFcnJvciA9IGVycm9yID0+IHtcclxuXHRcdFx0XHRcdHRoaXMuZXJyb3IgPSBlcnJvcjtcclxuXHRcdFx0XHRcdCRzY29wZS4kYXBwbHkoKTsgIC8vIHdlIHVzZSAkc2NvcGUuYXBwbHkgdG8gdHJpZ2dlciBBbmd1bGFyIGJpbmRpbmcgdXBkYXRlcyBzaW5jZSBsb2dpblNlcnZpY2UgZG9lc24ndCB1c2UgJHFcclxuXHRcdFx0XHRcdCAgICAgICAgICAgICAgICAgIC8vIHRvIHBlcmZvcm0gdGhlIHNhbWUgYWN0aW9uXHJcblx0XHRcdFx0fTtcclxuXHJcblx0XHRcdFx0Ly8gc3VjY2VzcyBoYW5kbGVyIGZvciBwcm9taXNlcyBiZWxvd1xyXG5cdFx0XHRcdHRoaXMuX3Byb2Nlc3NTdWNjZXNzID0gKCkgPT4ge1xyXG5cdFx0XHRcdFx0dGhpcy5jbG9zZU1vZGFsKCk7XHJcblx0XHRcdFx0XHQkc2NvcGUuJGFwcGx5KCk7ICAvLyB3ZSB1c2UgJHNjb3BlLmFwcGx5IHRvIHRyaWdnZXIgQW5ndWxhciBiaW5kaW5nIHVwZGF0ZXMgc2luY2UgbG9naW5TZXJ2aWNlIGRvZXNuJ3QgdXNlICRxXHJcblx0XHRcdFx0XHQgICAgICAgICAgICAgICAgICAvLyB0byBwZXJmb3JtIHRoZSBzYW1lIGFjdGlvblxyXG5cdFx0XHRcdH07XHJcblxyXG5cdFx0XHRcdC8vIG91ciBhY3R1YWwgbG9naW4gd29yaywgYnJvdWdodCB0byB1cyBieSB0aGUgaGFyZCB3b3JraW4nIGxvZ2luU2VydmljZVxyXG5cdFx0XHRcdHRoaXMubG9naW4gPSAodXNlclBhcmFtLCBwYXNzd29yZFBhcmFtKSA9PiB7XHJcblx0XHRcdFx0XHRyZXR1cm4gbG9naW5TZXJ2aWNlLmxvZ2luKHVzZXJQYXJhbSwgcGFzc3dvcmRQYXJhbSlcclxuXHRcdFx0XHRcdFx0LnRoZW4odGhpcy5fcHJvY2Vzc1N1Y2Nlc3MpXHJcblx0XHRcdFx0XHRcdC5jYXRjaCh0aGlzLl9wcm9jZXNzRXJyb3IpO1xyXG5cdFx0XHRcdH07XHJcblxyXG5cdFx0XHRcdHRoaXMuZ2l0TG9naW4gPSAoKSA9PiB7XHJcblx0XHRcdFx0XHRyZXR1cm4gbG9naW5TZXJ2aWNlLmdpdExvZ2luKClcclxuXHRcdFx0XHRcdFx0LnRoZW4odGhpcy5fcHJvY2Vzc1N1Y2Nlc3MpXHJcblx0XHRcdFx0XHRcdC5jYXRjaCh0aGlzLl9wcm9jZXNzRXJyb3IpO1xyXG5cdFx0XHRcdH07XHJcblxyXG5cdFx0XHRcdC8vIGNhbGwgb3VyIHBhcmVudCdzIGNsb3NlIG1vZGFsIHJvdXRpbmUgaW4gYWRkaXRpb24gdG8gY2xlYXJpbmcgdGhlIGxvZ2luIGZvcm1cclxuXHRcdFx0XHR0aGlzLmNsb3NlTW9kYWwgPSAoKSA9PiB7XHJcblx0XHRcdFx0XHQvLyBoaWRlIG1vZGFsIGltbWVkaWF0ZWx5XHJcblx0XHRcdFx0XHR0aGlzLm1vZGFsLmNsb3NlKCk7XHJcblxyXG5cdFx0XHRcdFx0Ly8gY2xlYXIgdGhlc2UgdGhlcmVhZnRlclxyXG5cdFx0XHRcdFx0dGhpcy5sb2dpbmZvcm0uY29udHJvbHMgPSB7IH07XHJcblx0XHRcdFx0XHR0aGlzLmxvZ2luZm9ybS4kc2V0UHJpc3RpbmUoKTtcclxuXHRcdFx0XHRcdHRoaXMuZXJyb3IgPSBudWxsO1xyXG5cdFx0XHRcdH07XHJcblx0XHRcdH1cclxuXHRcdH1dKTtcclxufSh3aW5kb3cuYW5ndWxhcikpOyIsIlwidXNlIHN0cmljdFwiO1xyXG5cclxuKGZ1bmN0aW9uKGFuZ3VsYXIpIHtcclxuXHRhbmd1bGFyXHJcblx0XHQubW9kdWxlKFwiYXBwbGljYXRpb25cIilcclxuXHRcdC5jb21wb25lbnQoXCJtb2RhbExvZ2luXCIsIHtcclxuXHRcdFx0cmVxdWlyZToge1xyXG5cdFx0XHRcdG1vZGFsOiBcIl5ob21lbWFkZU1vZGFsXCJcclxuXHRcdFx0fSxcclxuXHRcdFx0dGVtcGxhdGVVcmwgIDogXCJ3d3cvYXBwL2NvbXBvbmVudHMvaG9tZW1hZGVNb2RhbC9tb2RhbExvZ2luL21vZGFsTG9naW4uaHRtXCIsXHJcblx0XHRcdGNvbnRyb2xsZXIgICA6IFwibW9kYWxMb2dpbkNvbnRyb2xsZXJcIixcclxuXHRcdFx0Y29udHJvbGxlckFzIDogXCJ2bVwiXHJcblx0XHR9KTtcclxufSAod2luZG93LmFuZ3VsYXIpKTsiLCJcInVzZSBzdHJpY3RcIjtcclxuXHJcbihmdW5jdGlvbihhbmd1bGFyKSB7XHJcblx0YW5ndWxhclxyXG5cdFx0Lm1vZHVsZShcImFwcGxpY2F0aW9uXCIpXHJcblx0XHQuY29udHJvbGxlcihcIm1vZGFsUHJvbXB0Q29udHJvbGxlclwiLCBmdW5jdGlvbigpIHtcclxuXHRcdFx0dGhpcy4kb25Jbml0ID0gZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0Ly8gY3JlYXRlIHByb3BlcnRpZXMgZnJvbSBvdXIgcGFyZW50IG1vZGFsIGNvbXBvbmVudCdzIChyZXF1aXJlKSBwcm9wZXJ0aWVzIHNvIHdlIGNhblxyXG5cdFx0XHRcdC8vIGNvbnZlbmllbnRseSBiaW5kIHRoZW0gaW4gb3VyIG1vZGFsJ3Mgdmlld1xyXG5cclxuXHRcdFx0XHQvLyB0aGlzIGlzIGEgZnVuY3Rpb24gcmVmZXJlbmNlIHRoYXQgd2UgYmluZCB0b1xyXG5cdFx0XHRcdHRoaXMuY2xvc2UgPSB0aGlzLm1vZGFsLmNsb3NlO1xyXG5cclxuXHRcdFx0XHQvLyB0aGlzIGlzIGEgY29uZmlndXJhdGlvbiBvYmplY3Qgd2UgYmluZCB0b1xyXG5cdFx0XHRcdHRoaXMubW9kYWwgPSB0aGlzLm1vZGFsLm1vZGFsO1xyXG5cdFx0XHR9O1xyXG5cdFx0fSk7XHJcbn0gKHdpbmRvdy5hbmd1bGFyKSk7XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG5cclxuKGZ1bmN0aW9uIChhbmd1bGFyKSB7XHJcblx0YW5ndWxhclxyXG5cdFx0Lm1vZHVsZShcImFwcGxpY2F0aW9uXCIpXHJcblx0XHQuY29tcG9uZW50KFwibW9kYWxQcm9tcHRcIiwge1xyXG5cdFx0XHRyZXF1aXJlOiB7XHJcblx0XHRcdFx0bW9kYWw6IFwiXmhvbWVtYWRlTW9kYWxcIlxyXG5cdFx0XHR9LFxyXG5cdFx0XHR0ZW1wbGF0ZVVybCAgOiBcInd3dy9hcHAvY29tcG9uZW50cy9ob21lbWFkZU1vZGFsL21vZGFsUHJvbXB0L21vZGFsUHJvbXB0Lmh0bVwiLFxyXG5cdFx0XHRjb250cm9sbGVyICAgOiBcIm1vZGFsUHJvbXB0Q29udHJvbGxlclwiLFxyXG5cdFx0XHRjb250cm9sbGVyQXMgOiBcInZtXCJcclxuXHRcdH0pO1xyXG59ICh3aW5kb3cuYW5ndWxhcikpOyIsIlwidXNlIHN0cmljdFwiO1xyXG5cclxuKGZ1bmN0aW9uIChhbmd1bGFyKSB7XHJcblx0YW5ndWxhclxyXG5cdFx0Lm1vZHVsZShcImFwcGxpY2F0aW9uXCIpXHJcblx0XHQuY29udHJvbGxlcihcIm1vZGFsUmVnaXN0ZXJDb250cm9sbGVyXCIsIFtcIiRzY29wZVwiLCBcInJlZ2lzdGVyU2VydmljZVwiLCBmdW5jdGlvbigkc2NvcGUsIHJlZ2lzdGVyU2VydmljZSkge1xyXG5cdFx0XHR0aGlzLiRvbkluaXQgPSBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHR0aGlzLl9wcm9jZXNzRXJyb3IgPSBlcnJvciA9PiB7XHJcblx0XHRcdFx0XHR0aGlzLmVycm9yID0gZXJyb3I7XHJcblx0XHRcdFx0XHQvLyB0cmlnZ2VyIGRpZ2VzdCBzaW5jZSBGaXJlYmFzZSBwcm9taXNlIHdvbid0XHJcblx0XHRcdFx0XHQkc2NvcGUuJGFwcGx5KCk7XHJcblx0XHRcdFx0fTtcclxuXHJcblx0XHRcdFx0dGhpcy5fcHJvY2Vzc1N1Y2Nlc3MgPSByZXN1bHRzID0+IHtcclxuXHRcdFx0XHRcdHRoaXMuY2xvc2VNb2RhbCgpO1xyXG5cdFx0XHRcdFx0Ly8gdHJpZ2dlciBkaWdlc3Qgc2luY2UgRmlyZWJhc2UgcHJvbWlzZSB3b24ndFxyXG5cdFx0XHRcdFx0JHNjb3BlLiRhcHBseSgpO1xyXG5cdFx0XHRcdH07XHJcblxyXG5cdFx0XHRcdC8vIG91ciBhY3R1YWwgcmVnaXN0ZXIgd29yaywgYnJvdWdodCB0byB1cyBieSB0aGUgaGFyZCB3b3JraW4nIHJlZ2lzdGVyU2VydmljZVxyXG5cdFx0XHRcdHRoaXMucmVnaXN0ZXIgPSAocmVnaXN0ZXJGb3JtRGF0YSwgcGFzc3dvcmQpID0+IHtcclxuXHRcdFx0XHRcdHJldHVybiByZWdpc3RlclNlcnZpY2UucmVnaXN0ZXIocmVnaXN0ZXJGb3JtRGF0YSwgcGFzc3dvcmQpXHJcblx0XHRcdFx0XHRcdC50aGVuKHRoaXMuX3Byb2Nlc3NTdWNjZXNzKVxyXG5cdFx0XHRcdFx0XHQuY2F0Y2godGhpcy5fcHJvY2Vzc0Vycm9yKTtcclxuXHRcdFx0XHR9O1xyXG5cclxuXHRcdFx0XHR0aGlzLmNsb3NlTW9kYWwgPSAoKSA9PiB7XHJcblx0XHRcdFx0XHQvLyBoaWRlIG1vZGFsIGltbWVkaWF0ZWx5XHJcblx0XHRcdFx0XHR0aGlzLm1vZGFsLmNsb3NlKCk7XHJcblxyXG5cdFx0XHRcdFx0Ly8gY2xlYXIgdGhlc2UgdGhlcmVhZnRlclxyXG5cdFx0XHRcdFx0dGhpcy5yZWdpc3RlcmZvcm0uY29udHJvbHMgPSB7IH07XHJcblx0XHRcdFx0XHR0aGlzLnJlZ2lzdGVyZm9ybS4kc2V0UHJpc3RpbmUoKTtcclxuXHRcdFx0XHRcdHRoaXMuZXJyb3IgPSBudWxsO1xyXG5cdFx0XHRcdH07XHJcblx0XHRcdH1cclxuXHRcdH1dKTtcclxufSh3aW5kb3cuYW5ndWxhcikpOyIsIlwidXNlIHN0cmljdFwiO1xyXG5cclxuKGZ1bmN0aW9uIChhbmd1bGFyKSB7XHJcblx0YW5ndWxhclxyXG5cdFx0Lm1vZHVsZShcImFwcGxpY2F0aW9uXCIpXHJcblx0XHQuY29tcG9uZW50KFwibW9kYWxSZWdpc3RlclwiLCB7XHJcblx0XHRcdHJlcXVpcmU6IHtcclxuXHRcdFx0XHRtb2RhbDogXCJeaG9tZW1hZGVNb2RhbFwiXHJcblx0XHRcdH0sXHJcblx0XHRcdHRlbXBsYXRlVXJsICA6IFwid3d3L2FwcC9jb21wb25lbnRzL2hvbWVtYWRlTW9kYWwvbW9kYWxSZWdpc3Rlci9tb2RhbFJlZ2lzdGVyLmh0bVwiLFxyXG5cdFx0XHRjb250cm9sbGVyICAgOiBcIm1vZGFsUmVnaXN0ZXJDb250cm9sbGVyXCIsXHJcblx0XHRcdGNvbnRyb2xsZXJBcyA6IFwidm1cIlxyXG5cdFx0fSk7XHJcbn0gKHdpbmRvdy5hbmd1bGFyKSk7Il19
